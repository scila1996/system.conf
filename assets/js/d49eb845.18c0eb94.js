"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[57],{3905:function(n,t,e){e.d(t,{Zo:function(){return h},kt:function(){return d}});var i=e(7294);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function c(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function o(n,t){if(null==n)return{};var e,i,a=function(n,t){if(null==n)return{};var e,i,a={},r=Object.keys(n);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(a[e]=n[e]);return a}(n,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(a[e]=n[e])}return a}var l=i.createContext({}),g=function(n){var t=i.useContext(l),e=t;return n&&(e="function"==typeof n?n(t):c(c({},t),n)),e},h=function(n){var t=g(n.components);return i.createElement(l.Provider,{value:t},n.children)},u={inlineCode:"code",wrapper:function(n){var t=n.children;return i.createElement(i.Fragment,{},t)}},s=i.forwardRef((function(n,t){var e=n.components,a=n.mdxType,r=n.originalType,l=n.parentName,h=o(n,["components","mdxType","originalType","parentName"]),s=g(e),d=a,p=s["".concat(l,".").concat(d)]||s[d]||u[d]||r;return e?i.createElement(p,c(c({ref:t},h),{},{components:e})):i.createElement(p,c({ref:t},h))}));function d(n,t){var e=arguments,a=t&&t.mdxType;if("string"==typeof n||a){var r=e.length,c=new Array(r);c[0]=s;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=n,o.mdxType="string"==typeof n?n:a,c[1]=o;for(var g=2;g<r;g++)c[g]=e[g];return i.createElement.apply(null,c)}return i.createElement.apply(null,e)}s.displayName="MDXCreateElement"},1911:function(n,t,e){e.r(t),e.d(t,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return g},assets:function(){return h},toc:function(){return u},default:function(){return d}});var i=e(7462),a=e(3366),r=(e(7294),e(3905)),c=["components"],o={slug:"sdn-nsx-t-introduction",title:"T\u1ed5ng quan v\u1ec1 SDN v\xe0 VMware NSX-T",authors:"scila1996",tags:["nsxt","nsx","vmware","sdn","network","virtualization"]},l=void 0,g={permalink:"/system.conf/blog/sdn-nsx-t-introduction",editUrl:"https://github.com/scila1996/system.conf/posts/blog/sdn-nsx-t-intro/nsx-t.guid3.101.md",source:"@site/blog/sdn-nsx-t-intro/nsx-t.guid3.101.md",title:"T\u1ed5ng quan v\u1ec1 SDN v\xe0 VMware NSX-T",description:"East-West traffic v\xe0 North-South traffic",date:"2021-09-15T19:01:06.885Z",formattedDate:"September 15, 2021",tags:[{label:"nsxt",permalink:"/system.conf/blog/tags/nsxt"},{label:"nsx",permalink:"/system.conf/blog/tags/nsx"},{label:"vmware",permalink:"/system.conf/blog/tags/vmware"},{label:"sdn",permalink:"/system.conf/blog/tags/sdn"},{label:"network",permalink:"/system.conf/blog/tags/network"},{label:"virtualization",permalink:"/system.conf/blog/tags/virtualization"}],readingTime:20.065,truncated:!0,authors:[{name:"Nguyen Trung",url:"https://github.com/scila1996",title:"System Engineer - currently working at MB SHINSEI",imageURL:"https://github.com/scila1996/system.conf/raw/main/static/img/mr-f.jpg",key:"scila1996"}]},h={authorsImageUrls:[void 0]},u=[{value:"East-West traffic v\xe0 North-South traffic",id:"east-west-traffic-v\xe0-north-south-traffic",children:[]},{value:"Ki\u1ebfn tr\xfac m\u1ea1ng Leaf-Spine",id:"ki\u1ebfn-tr\xfac-m\u1ea1ng-leaf-spine",children:[]},{value:"Thi\u1ebft k\u1ebf h\u1ea1 t\u1ea7ng Network",id:"thi\u1ebft-k\u1ebf-h\u1ea1-t\u1ea7ng-network",children:[]},{value:"Kh\xf4ng gian \u0111\u1ecba ch\u1ec9 m\u1ea1ng d\xe0nh ri\xeang (Reserved IP addresses)",id:"kh\xf4ng-gian-\u0111\u1ecba-ch\u1ec9-m\u1ea1ng-d\xe0nh-ri\xeang-reserved-ip-addresses",children:[{value:"100.64.0.0/10",id:"100640010",children:[]},{value:"224.0.0.0/4",id:"2240004",children:[]},{value:"169.254.0.0/16",id:"1692540016",children:[]}]},{value:"Routing Architecture",id:"routing-architecture",children:[{value:"Single Tier Routing",id:"single-tier-routing",children:[]},{value:"Multi Tier Routing",id:"multi-tier-routing",children:[]}]},{value:"Transport Zones",id:"transport-zones",children:[]},{value:"Uplink profile",id:"uplink-profile",children:[]},{value:"Overlay l\xe0 g\xec",id:"overlay-l\xe0-g\xec",children:[{value:"Giao th\u1ee9c GENEVE",id:"giao-th\u1ee9c-geneve",children:[]}]},{value:"N-VDS",id:"n-vds",children:[]},{value:"Segments (logical switch)",id:"segments-logical-switch",children:[]},{value:"Transport Nodes",id:"transport-nodes",children:[{value:"vSphere ESXi Node",id:"vsphere-esxi-node",children:[]},{value:"NSX-T Edge Node",id:"nsx-t-edge-node",children:[]}]},{value:"Logical Router",id:"logical-router",children:[]},{value:"Service Router (SR) v\xe0 Distributed Routing (DR)",id:"service-router-sr-v\xe0-distributed-routing-dr",children:[{value:"Distributed Routing (DR)",id:"distributed-routing-dr",children:[]},{value:"Service Router (SR)",id:"service-router-sr",children:[]}]},{value:"Edge Bridge",id:"edge-bridge",children:[]},{value:"Flow Diagram",id:"flow-diagram",children:[]}],s={toc:u};function d(n){var t=n.components,o=(0,a.Z)(n,c);return(0,r.kt)("wrapper",(0,i.Z)({},s,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"east-west-traffic-v\xe0-north-south-traffic"},"East-West traffic v\xe0 North-South traffic"),(0,r.kt)("p",null,"Thu\u1eadt ng\u1eef s\u1eed d\u1ee5ng trong DataCenter, c\xe1c SDN ph\xe1t tri\u1ec3n d\u1ef1a v\xe0o h\u1ea1 t\u1ea7ng DataCenter n\xean s\u1ebd s\u1eed d\u1ee5ng c\xe1c thu\u1eadt ng\u1eef n\xe0y."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"East-West"),": \u0110\xe2y l\xe0 traffic n\u1eb1m b\xean trong DataCenter, v\xed d\u1ee5 gi\u1eefa server v\u1edbi server."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"North-South"),": \u0110\xe2y l\xe0 traffic t\u1eeb client \u0111\u1ebfn server ho\u1eb7c t\u1eeb server ra ngo\xe0i Internet, bao g\u1ed3m t\u1ea5t c\u1ea3 c\xe1c k\u1ebft n\u1ed1i t\u1eeb DataCenter ra ngo\xe0i ho\u1eb7c t\u1eeb ngo\xe0i v\xe0o trong DataCenter.")),(0,r.kt)("h2",{id:"ki\u1ebfn-tr\xfac-m\u1ea1ng-leaf-spine"},"Ki\u1ebfn tr\xfac m\u1ea1ng Leaf-Spine"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(2250).Z})),(0,r.kt)("p",null,"Leaf Switch cung c\u1ea5p c\xe1c k\u1ebft n\u1ed1i t\u1edbi c\xe1c m\xe1y ch\u1ee7, Firewall, Router ho\u1eb7c c\xe1c thi\u1ebft b\u1ecb c\xe2n b\u1eb1ng t\u1ea3i. C\xe1c Leaf switch \u0111\u01b0\u1ee3c k\u1ebft n\u1ed1i t\u1edbi t\u1ea5t c\u1ea3 Spine t\u1ea1o th\xe0nh m\xf4 h\xecnh Full-mesh nh\u01b0ng kh\xf4ng k\u1ebft n\u1ed1i v\u1edbi nhau (Leaf-Leaf) tr\u1eeb khi s\u1eed d\u1ee5ng c\xe1c c\xf4ng ngh\u1ec7 HA nh\u01b0 vPC, Stackwise, IRF."),(0,r.kt)("p",null,"Spine Switch \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 k\u1ebft n\u1ed1i v\u1edbi t\u1ea5t c\u1ea3 Leaf switch. C\xe1c Spine switch c\u0169ng kh\xf4ng k\u1ebft n\u1ed1i v\u1edbi c\xe1c Spine switch kh\xe1c \u0111\u1ec3 t\u1ea1o th\xe0nh m\xf4 h\xecnh c\xf3 c\xf9ng b\u01b0\u1edbc nh\u1ea3y gi\u1eefa c\xe1c m\xe1y ch\u1ee7. \u0110i\u1ec1u n\xe0y mang l\u1ea1i \u0111\u1ed9 tr\u1ec5 c\xf3 th\u1ec3 d\u1ef1 \u0111o\xe1n v\xe0 b\u0103ng th\xf4ng cao gi\u1eefa c\xe1c m\xe1y ch\u1ee7. Li\xean k\u1ebft gi\u1eefa Leaf v\xe0 Spine c\xf3 th\u1ec3 l\xe0 li\xean k\u1ebft Layer 2 ho\u1eb7c Layer 3 s\u1eed d\u1ee5ng c\xe1c giao th\u1ee9c \u0111\u1ecbnh tuy\u1ebfn nh\u01b0 iBGP."),(0,r.kt)("h2",{id:"thi\u1ebft-k\u1ebf-h\u1ea1-t\u1ea7ng-network"},"Thi\u1ebft k\u1ebf h\u1ea1 t\u1ea7ng Network"),(0,r.kt)("p",null,"D\u1ef1a theo t\xe0i li\u1ec7u c\u1ee7a VMware, VMware Validated Design"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.vmware.com/en/VMware-Validated-Design/6.2/sddc-architecture-and-design-for-the-management-domain/GUID-C924E896-D9C4-47BF-91D5-DF72605EF63E.html"},"https://docs.vmware.com/en/VMware-Validated-Design/6.2/sddc-architecture-and-design-for-the-management-domain/GUID-C924E896-D9C4-47BF-91D5-DF72605EF63E.html")),(0,r.kt)("p",null,"T\xe0i li\u1ec7u n\xe0y m\xf4 t\u1ea3 v\u1ec1 vi\u1ec7c thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng VMware s\u1eed d\u1ee5ng NSX-T. M\xf4 t\u1ea3 t\u1ed5ng quan v\u1ec1 ki\u1ebfn tr\xfac \u1ee9ng d\u1ee5ng m\xf4 h\xecnh v\xed d\u1ee5 CAA (Core-Aggregation-Access), Leaf-Spine. H\u01b0\u1edbng d\u1eabn m\xf4 t\u1ea3 k\u1ebft n\u1ed1i, t\u1ea1o v\xe0 chu\u1ea9n b\u1ecb c\xe1c VLAN, Subnets \u1edf ph\u1ea7n Underlay."),(0,r.kt)("p",null,"Danh s\xe1ch c\xe1c ch\u1ee9c n\u0103ng c\u1ea7n thi\u1ebft trong h\u1ea1 t\u1ea7ng NSX-T. T\u1ea1o VLAN v\xe0 t\u1eebng Subnets t\u01b0\u01a1ng \u1ee9ng v\u1edbi t\u1eebng ch\u1ee9c n\u0103ng"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Management")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"vSphere vMotion")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"vSAN")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Host Overlay")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NFS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Uplink01")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Uplink02")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("del",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"del"},"Edge Overlay")))),(0,r.kt)("h2",{id:"kh\xf4ng-gian-\u0111\u1ecba-ch\u1ec9-m\u1ea1ng-d\xe0nh-ri\xeang-reserved-ip-addresses"},"Kh\xf4ng gian \u0111\u1ecba ch\u1ec9 m\u1ea1ng d\xe0nh ri\xeang (Reserved IP addresses)"),(0,r.kt)("p",null,"L\xe0 c\xe1c d\u1ea3i m\u1ea1ng \u0111\u1eb7c bi\u1ec7t v\xe0 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ecbnh tuy\u1ebfn tr\xean Internet, danh s\xe1ch theo trang ch\u1ee7 c\u1ee7a IANA \u1edf \u0111\xe2y."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml"},"https://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml")),(0,r.kt)("h3",{id:"100640010"},"100.64.0.0/10"),(0,r.kt)("p",null,"Trong n\u0103m 2012, IANA \u0111\xe3 ph\xe2n b\u1ed5 4 tri\u1ec7u \u0111\u1ecba ch\u1ec9 100.64.0.0/10 \u0111\u1ec3 s\u1eed d\u1ee5ng trong m\xf4i tr\u01b0\u1eddng NAT gi\u1eefa c\xe1c thi\u1ebft b\u1ecb \u0111\u1ecbnh tuy\u1ebfn c\u1ee7a nh\xe0 m\u1ea1ng v\u1edbi vai tr\xf2 nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5."),(0,r.kt)("h4",{id:"carrier-grade-nat-cgnat"},"Carrier-grade NAT (CGNAT)"),(0,r.kt)("p",null,"C\xf4ng ngh\u1ec7 NAT \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong ISP"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6598"},"https://datatracker.ietf.org/doc/html/rfc6598")),(0,r.kt)("p",null,"L\xe0 d\u1ea3i \u0111\u1ecba ch\u1ec9 m\u1ea1ng private gi\u1ed1ng nh\u01b0 RFC1918 nh\u01b0ng \u0111\u01b0\u1ee3c d\xe0nh ri\xeang cho vi\u1ec7c NAT gi\u1eefa c\xe1c nh\xe0 cung c\u1ea5p Internet. Tr\xean Internet, vi\u1ec7c NAT kh\xf4ng gi\u1ed1ng nh\u01b0 \u1edf d\u01b0\u1edbi h\u1ea1 t\u1ea7ng local, ISP kh\xf4ng s\u1eed d\u1ee5ng c\xe1c d\u1ea3i m\u1ea1ng Private RFC1918. h\u1ecd d\xf9ng d\u1ea3i m\u1ea1ng d\xe0nh ri\xeang ch\u1ec9 cho vi\u1ec7c NAT gi\u1eefa c\xe1c thi\u1ebft b\u1ecb NAT, c\xe1c thi\u1ebft b\u1ecb n\xe0y ph\u1ea3i h\u1ed7 tr\u1ee3 CGN. D\u1ea3i m\u1ea1ng n\xe0y kh\xf4ng \u0111\u01b0\u1ee3c qu\u1ea3ng b\xe1 ho\u1eb7c route ra ngo\xe0i Internet v\xe0 c\u0169ng kh\xf4ng d\xf9ng \u0111\u01b0\u1ee3c trong Internal, n\xf3 ch\u1ec9 d\xf9ng cho vi\u1ec7c NAT gi\u1eefa c\xe1c Router trong v\xe0 ngo\xe0i m\u1ea1ng"),(0,r.kt)("p",null,"D\u1ea3i \u0111\u1ecba ch\u1ec9 n\xe0y s\u1ebd \u0111\u01b0\u1ee3c ng\u1ea7m s\u1eed d\u1ee5ng trong vi\u1ec7c giao ti\u1ebfp gi\u1eefa Gateway TIER-0 v\xe0 TIER-1 trong NSX-T"),(0,r.kt)("h3",{id:"2240004"},"224.0.0.0/4"),(0,r.kt)("p",null,"\u0110\xe2y l\xe0 d\u1ea3i m\u1ea1ng Multicast, s\u1eed d\u1ee5ng nhi\u1ec1u trong giao th\u1ee9c VRRP, c\u1ea5u h\xecnh \u0111\u1ecbnh tuy\u1ebfn OSPF ho\u1eb7c IGMP"),(0,r.kt)("h3",{id:"1692540016"},"169.254.0.0/16"),(0,r.kt)("p",null,"D\u1ea3i m\u1ea1ng link-local phi\xean b\u1ea3n cho IPv4. Ph\xeda d\u01b0\u1edbi n\u1ec1n network, \u0111\u1ecba ch\u1ec9 n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 cung c\u1ea5p c\xe1c d\u1ecbch v\u1ee5 nh\u01b0 Time, DNS Server. V\xed d\u1ee5 nh\u01b0 AWS EC2 s\u1eed d\u1ee5ng c\xe1c \u0111\u1ecba ch\u1ec9 sau"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NTP"),": ",(0,r.kt)("em",{parentName:"li"},"169.254.169.123")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"DNS"),": ",(0,r.kt)("em",{parentName:"li"},"169.254.169.253"))),(0,r.kt)("p",null,"Trong NSX-T ch\xfang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\xe0m Transit Link gi\u1eefa traffic DR/SR trong c\xf9ng m\u1ed9t Gateway"),(0,r.kt)("h2",{id:"routing-architecture"},"Routing Architecture"),(0,r.kt)("p",null,"Trong NSX-T c\xf3 2 lo\u1ea1i Gateway l\xe0 Tier-0 (north-south traffic) v\xe0 Tier-1 (east-west traffic)."),(0,r.kt)("p",null,"D\u1ef1a v\xe0o kh\xe1i ni\u1ec7m c\u01a1 b\u1ea3n c\u1ee7a DataCenter, ta c\xf3 2 lo\u1ea1i traffic l\xe0"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"North-South traffic"),": Traffic \u0111i ra ngo\xe0i cluster tr\xean DataCenter"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"East-West traffic"),": Traffic n\u1ed9i b\u1ed9 b\xean trong gi\u1eefa c\xe1c Node v\u1edbi nhau")),(0,r.kt)("p",null,"\u0110\u1ec3 Routing trong v\xe0 ngo\xe0i h\u1ec7 th\u1ed1ng m\u1ea1ng, ta s\u1ebd c\xf3 2 m\xf4 h\xecnh l\xe0 Single-Tier v\xe0 Multi-Tier khi c\u1ea5u h\xecnh NSX-T."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(6021).Z})),(0,r.kt)("p",null,"Trong NSX-T c\xf3 2 lo\u1ea1i gateway t\u01b0\u01a1ng \u1ee9ng l\xe0 Tier-0 Gateway v\xe0 Tier-1 Gateway, v\u1edbi 2 lo\u1ea1i gateway n\xe0y ta s\u1ebd c\xf3 m\xf4 h\xecnh routing gi\u1eefa Cluster v\u1edbi h\u1ec7 th\u1ed1ng b\xean ngo\xe0i. C\xe1c gateway ho\u1ea1t \u0111\u1ed9ng gi\u1eefa v\xe0o c\xe1c Edge Node, v\u1ec1 c\u01a1 b\u1ea3n n\xf3 gi\u1ed1ng nh\u01b0 m\u1ed9t thi\u1ebft b\u1ecb Layer 3 nh\u01b0 Switch Layer 3 c\xf3 kh\u1ea3 n\u0103ng Routing, nh\u01b0ng v\xec Gateway trong NSX-T l\xe0 SDN n\xean n\xf3 h\u1ed7 tr\u1ee3 \u0111\u1ecbnh tuy\u1ebfn \u0111\u01b0\u1ee3c r\u1ea5t nhi\u1ec1u giao th\u1ee9c."),(0,r.kt)("h3",{id:"single-tier-routing"},"Single Tier Routing"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Ch\u1ec9 s\u1eed d\u1ee5ng Tier-0 gateway, gateway n\xe0y s\u1ebd k\u1ebft n\u1ed1i t\u1ea5t c\u1ea3 c\xe1c VM trong Cluster, Tier-0 c\xf3 kh\u1ea3 n\u0103ng k\u1ebft n\u1ed1i v\u1edbi Uplink \u0111i ra ngo\xe0i Cluster. M\xf4 h\xecnh n\xe0y r\u1ea5t \u0111\u01a1n gi\u1ea3n, m\u1ed9t gateway d\xf9ng cho t\u1ea5t c\u1ea3 c\xe1c VM."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"image",src:e(8490).Z})))),(0,r.kt)("h3",{id:"multi-tier-routing"},"Multi Tier Routing"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Vi\u1ec7c ch\u1ec9 s\u1eed d\u1ee5ng Tier-0 th\xec t\u1ea5t c\u1ea3 c\xe1c VM \u0111\u1ec1u c\xf3 kh\u1ea3 n\u0103ng \u0111i \u0111\u01b0\u1ee3c l\u01b0u l\u01b0\u1ee3ng ra ngo\xe0i Cluster, nh\u01b0ng n\u1ebfu ta ch\u1ec9 c\xf3 c\xe1c VM m\xe0 ch\u1ec9 giao ti\u1ebfp n\u1ed9i b\u1ed9 b\xean trong Cluster m\xe0 kh\xf4ng mu\u1ed1n cho ra ngo\xe0i th\xec sao ? Tier-0 v\u1eabn l\xe0m \u0111\u01b0\u1ee3c b\u1eb1ng c\xe1ch kh\xf4ng NAT d\u1ea3i \u0111\xf3 ra ngo\xe0i qua Uplink l\xe0 \u0111\u01b0\u1ee3c, tuy nhi\xean v\u1edbi concepts chu\u1ea9n c\u1ee7a vi\u1ec7c sinh ra Tier-0 v\xe0 Tier-1, mu\u1ed1n \u0111\u1ed9c l\u1eadp ho\xe0n to\xe0n v\u1ec1 m\u1eb7t secure, ta s\u1ebd c\xf3 1 lo\u1ea1i gateway g\u1ecdi l\xe0 Tier-1. Lo\u1ea1i gateway n\xe0y kh\xf4ng \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh Uplink ra ngo\xe0i v\xe0 traffic s\u1ebd ch\u1ec9 n\u1ed9i b\u1ed9 trong Cluster, ch\xfang c\xf3 th\u1ec3 c\xf3 kh\xe1c v\xf9ng m\u1ea1ng nh\u01b0ng v\u1eabn Routing \u0111\u01b0\u1ee3c ch\u1ec9 b\xean trong v\u1edbi nhau. Tier-1 tuy l\xe0 gateway n\u1ed9i b\u1ed9 nh\u01b0ng v\u1eabn c\xf3 tr\u01b0\u1eddng h\u1ee3p c\u1ea7n cho c\xe1c VM n\u1ed1i v\xe0o Tier-1 \u0111\u01b0\u1ee3c \u0111i ra ngo\xe0i Cluster. V\xe0 ta s\u1ebd c\u1ea5u h\xecnh th\xeam Tier-1 n\u1ed1i t\u1edbi Tier-0 qua CGNAT. \u0110\xe2y l\xe0 m\u1ed9t k\u1ef9 thu\u1eadt NAT gi\u1eefa c\xe1c Router trong ISP (nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 m\u1ea1ng), \u0111\u01b0\u1ee3c \u1ee9ng d\u1ee5ng trong NSX-T.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"C\xe1c VM k\u1ebft n\u1ed1i t\u1edbi Gateway kh\xe1c nhau ho\u1eb7c kh\xf4ng c\xf9ng Gateway n\xe0y th\xec kh\xf4ng th\u1ec3 n\xe0o giao ti\u1ebfp \u0111\u01b0\u1ee3c v\u1edbi nhau, ph\xf9 h\u1ee3p v\u1edbi h\u1ec7 th\u1ed1ng ki\u1ec3u Multi-Tenant ho\u1eb7c mu\u1ed1n ph\xe2n chia Network m\u1ee9c \u0111\u1ed9 cao gi\u1eefa c\xe1c VM."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"image",src:e(1729).Z})))),(0,r.kt)("h2",{id:"transport-zones"},"Transport Zones"),(0,r.kt)("p",null,"M\u1ed9t transport zone \u0111\u01b0\u1ee3c t\u1ea1o ra s\u1ebd thi\u1ebft l\u1eadp m\u1ed9t v\xf2ng bi\xean m\u1ea1ng. Ch\u1ec9 c\xf3 c\xe1c Node, c\xe1c Edge n\u1eb1m trong c\xf9ng m\u1ed9t zone m\u1edbi c\xf3 th\u1ec3 th\u1ea5y \u0111\u01b0\u1ee3c Logical Switch (segments) c\u1ee7a nhau."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(2086).Z})),(0,r.kt)("p",null,"Transport Zone \u0111\u01b0\u1ee3c t\u1ea1o ra nh\u1eb1m m\u1ee5c \u0111\xedch \u0111\u1ec3 VM nh\xecn th\u1ea5y nhau trong Transport Zone \u0111\xf3. V\xed d\u1ee5 ta c\xf3 3 Cluster"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Cluster A",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Node A-0 (zone VNPT)"),(0,r.kt)("li",{parentName:"ul"},"Node A-1 (zone VNPT)"))),(0,r.kt)("li",{parentName:"ul"},"Cluster B",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Node B-0  (zone VNPT)"))),(0,r.kt)("li",{parentName:"ul"},"Cluster C",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Node C-0 (zone Viettel)"),(0,r.kt)("li",{parentName:"ul"},"Node C-1 (zone VNPT)"))),(0,r.kt)("li",{parentName:"ul"},"Cluster D",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Node D-0 (zone Viettel)"),(0,r.kt)("li",{parentName:"ul"},"Node D-1"),(0,r.kt)("li",{parentName:"ul"},"Node D-2")))),(0,r.kt)("p",null,"Ch\u1ec9 c\xe1c VM trong node ",(0,r.kt)("inlineCode",{parentName:"p"},"A-0"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"A-1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"B-0"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"C-1")," thu\u1ed9c ",(0,r.kt)("inlineCode",{parentName:"p"},"zone VNPT")," m\u1edbi c\xf3 th\u1ec3 nh\xecn th\u1ea5y PortGroup (segments) trong zone VNPT."),(0,r.kt)("p",null,"Ch\u1ec9 c\xe1c VM trong node ",(0,r.kt)("inlineCode",{parentName:"p"},"C-0"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"D-0")," m\u1edbi c\xf3 th\u1ec3 nh\xecn th\u1ea5y PortGroup (segments) trong zone Viettel."),(0,r.kt)("p",null,"C\xe1c VM \u1edf c\xe1c node thu\u1ed9c zone n\xe0o s\u1ebd ch\u1ec9 nh\xecn th\u1ea5y PortGroup c\u1ee7a zone \u0111\xf3 v\xe0 kh\xf4ng nh\xecn th\u1ea5y ho\u1eb7c kh\xf4ng th\u1ec3 g\xe1n sang PortGroup thu\u1ed9c zone kh\xe1c. Nh\u01b0 v\xed d\u1ee5 tr\xean, m\u1eb7c d\xf9 ",(0,r.kt)("inlineCode",{parentName:"p"},"Cluster C")," c\xf3 2 node trong c\xf9ng m\u1ed9t Cluster, nh\u01b0ng thu\u1ed9c Zone kh\xe1c nhau n\xean c\u1ea3 2 Node \u0111\xf3 s\u1ebd kh\xf4ng th\u1ea5y PortGroup thu\u1ed9c Zone c\u1ee7a nhau. M\u1eb7c d\xf9 ch\xfang c\xf3 c\xf9ng VDS lu\xf4n nh\u01b0ng kh\xe1c Zone n\xean s\u1ebd kh\xf4ng nh\xecn th\u1ea5y nhau \u0111\u01b0\u1ee3c."),(0,r.kt)("p",null,"C\xf3 2 lo\u1ea1i Transport Zone. Overlay v\xe0 VLAN"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Overlay"),": s\u1ebd d\xf9ng cho k\u1ebft n\u1ed1i n\u1ed9i b\u1ed9 b\xean trong gi\u1eefa c\xe1c node, NSX-T s\u1ebd s\u1eed d\u1ee5ng giao th\u1ee9c GENEVE."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"VLAN"),": S\u1eed d\u1ee5ng cho Underlay \u0111\u1ec3 k\u1ebft n\u1ed1i th\u1eb3ng v\u1edbi k\u1ebft n\u1ed1i VLAN ngo\xe0i Host. Lo\u1ea1i n\xe0y th\u01b0\u1eddng s\u1eed d\u1ee5ng d\xf9ng k\u1ebft n\u1ed1i North-South t\u1eeb Uplink c\u1ee7a NSX-T Edge t\u1edbi h\u1ea1 t\u1ea7ng v\u1eadt l\xfd.")),(0,r.kt)("p",null,"Thu\u1ed9c t\xednh c\u1ee7a Transport Zone"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"M\u1ed9t Transport Zone c\xf3 th\u1ec3 s\u1eed d\u1ee5ng cho t\u1ea5t c\u1ea3 c\xe1c lo\u1ea1i Transport Node (ESXi, KVM, Bare-metal server, NSX-Edge)"),(0,r.kt)("li",{parentName:"ol"},"C\xf3 2 lo\u1ea1i Transport Zone l\xe0 (VLAN ho\u1eb7c Overlay)")),(0,r.kt)("h2",{id:"uplink-profile"},"Uplink profile"),(0,r.kt)("p",null,"C\xe1c Nodes mu\u1ed1n giao ti\u1ebfp v\u1edbi c\xe1c Node kh\xe1c s\u1ebd ph\u1ea3i c\u1ea5u h\xecnh Uplink. Uplink n\xe0y th\u01b0\u1eddng l\xe0 c\xe1c Port v\u1eadt l\xfd tr\xean c\xe1c Node. C\u1ea5u h\xecnh Uplink s\u1ebd ch\u1ecdn c\xe1c Port, c\u1ea5u h\xecnh LAGs, Teaming gi\u1ed1ng tr\xean VDS."),(0,r.kt)("p",null,"Uplink trong NSX-T c\xf3 1 tham s\u1ed1 g\u1ecdi l\xe0 Transport VLAN. Network m\xe0 s\u1eed d\u1ee5ng Transport Zone thu\u1ed9c ki\u1ec3u Overlay th\xec n\xf3 s\u1ebd ph\u1ea3i \u0111i qua m\u1ed9t VLAN g\u1ecdi l\xe0 Transport VLAN"),(0,r.kt)("p",null,"Transport Zones thu\u1ed9c lo\u1ea1i Overlay v\xe0 Uplink c\xf3 tham s\u1ed1 Transport VLAN s\u1ebd k\u1ebft h\u1ee3p v\u1edbi nhau \u0111\u1ec3 t\u1ea1o ra 1 \u0111\u01b0\u1eddng Overlay. L\u01b0u l\u01b0\u1ee3ng c\u1ee7a to\xe0n b\u1ed9 c\xe1c VM b\xean trong m\u1ed9t Zones thu\u1ed9c lo\u1ea1i Overlay s\u1ebd \u0111i qua VLAN n\xe0y, VLAN c\u1ea5u h\xecnh tr\xean Uplink s\u1ebd ch\u1ecdn Port v\xe0 Teaming policy, gi\u1ed1ng v\u1edbi Uplink trong VDS"),(0,r.kt)("h2",{id:"overlay-l\xe0-g\xec"},"Overlay l\xe0 g\xec"),(0,r.kt)("p",null,"Overlay network l\xe0 1 concepts nh\u1eb1m m\u1ee5c \u0111\xedch \u0111\xf3ng g\xf3i v\xe0 v\u1eadn chuy\u1ec3n g\xf3i tin t\u1eeb Host n\xe0y sang Host kh\xe1c. Overlay Network mang th\xf4ng tin c\u1ee7a Network t\u1eeb Node n\xe0y \u0111i sang Node kh\xe1c. V\xed d\u1ee5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Node: A",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"VM: A-0 (VNI 71010)"),(0,r.kt)("li",{parentName:"ul"},"VM: A-1 (VNI 71020)"))),(0,r.kt)("li",{parentName:"ul"},"Node: B",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"VM: B-0 (VNI 72010)"),(0,r.kt)("li",{parentName:"ul"},"VM: B-1 (VNI 72020)"))),(0,r.kt)("li",{parentName:"ul"},"Node: C",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"VM: C-0 (VNI 73010)"),(0,r.kt)("li",{parentName:"ul"},"VM: C-1 (VNI 73020)"),(0,r.kt)("li",{parentName:"ul"},"VM: C-2 (VNI 73030)")))),(0,r.kt)("p",null,"M\u1ed7i node s\u1ebd ch\u1ec9 c\xf3 1 port v\u1eadt l\xfd, khi m\u1ed9t VM t\u1eeb node n\xe0y \u0111i sang node kh\xe1c, g\xf3i tin s\u1ebd \u0111\u01b0\u1ee3c \u0111\xf3ng trong Overlay v\xe0 g\u1eedi gi\u1eefa c\xe1c Node, v\u1ec1 l\xfd thuy\u1ebft th\xec ch\xfang l\xe0 th\xf4ng su\u1ed1t v\u1edbi nhau, v\xed d\u1ee5 c\xe1c VM c\xf3 VNI (ID c\u1ee7a VXLAN) l\xe0 71000 c\xf3 c\xf9ng d\u1ea3i v\u1edbi nhau s\u1ebd nh\xecn th\u1ea5y nhau 1 c\xe1ch trong su\u1ed1t, nh\u01b0ng th\u1ef1c ch\u1ea5t ch\xfang \u0111i tr\xean m\u1ed9t \u0111\u01b0\u1eddng v\u1eadt l\xfd g\u1ecdi l\xe0 Overlay v\xe0 \u0111\u01b0\u1ee3c v\u1eadn chuy\u1ec3n xu\u1ed1ng d\u01b0\u1edbi VM t\u01b0\u01a1ng \u1ee9ng"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(5262).Z})),(0,r.kt)("h3",{id:"giao-th\u1ee9c-geneve"},"Giao th\u1ee9c GENEVE"),(0,r.kt)("p",null,"Giao th\u1ee9c cung c\u1ea5p t\u1ea7ng network Overlay. \u0110\u1ea7u ti\xean h\u1ec7 th\u1ed1ng s\u1ebd t\u1ea1o ra c\xe1c m\u1ea1ng Logical \u0111\u1ec3 c\xf4 l\u1eadp t\xe0i nguy\xean Network, s\u1eed d\u1ee5ng giao th\u1ee9c Geneve, l\u1edbp n\xe0y s\u1ebd l\xe0 tr\u1eebu t\u01b0\u1ee3ng gi\u1eefa c\xe1c Node, g\xf3i tin \u0111\u01b0\u1ee3c \u0111\xf3ng g\xf3i qua NIC. Geneve ho\u1ea1t \u0111\u1ed9ng b\u1eb1ng c\xe1ch t\u1ea1o Layer 2 Logical Network sau \u0111\xf3 \u0111\xf3ng g\xf3i qua UDP Layer 3 \u0111\u1ec3 g\u1eedi \u0111i gi\u1eefa c\xe1c Hosts. Theo t\xe0i li\u1ec7u c\u1ee7a RFC, m\u1ee5c \u0111\xedch thi\u1ebft k\u1ebf ra GENEVE v\xec c\xe1c vendor v\u1ec1 network ph\xe1t tri\u1ec3n nhi\u1ec1u giao th\u1ee9c Overlay kh\xe1c nhau, trong \u0111\xf3 c\xf3 VXLAN v\xe0 NVGRE, ch\xfang s\u1eed d\u1ee5ng format g\u1ea7n gi\u1ed1ng nhau v\u1edbi concepts ch\xednh l\xe0 d\xf9ng 24 bit l\xe0m NI (network identifier)"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(7499).Z})),(0,r.kt)("p",null,"GENEVE s\u1ebd th\u1ef1c hi\u1ec7n implement c\xe1c giao th\u1ee9c n\xe0y, v\u1ec1 m\u1eb7t thi\u1ebft k\u1ebf, n\xf3 t\u1ea1o ra m\u1ed9t giao th\u1ee9c m\u1edbi l\xe0 GENEVE gi\u1ed1ng v\u1edbi c\xe1c giao th\u1ee9c tr\xean. Nh\u01b0ng trong Header s\u1ebd ch\u1ee9a OPTIONAL, N\u1ebfu 2 thi\u1ebft b\u1ecb c\xf3 h\u1ed7 tr\u1ee3 Offload g\xf3i tin tr\xean thi\u1ebft b\u1ecb ph\u1ea7n c\u1ee9ng (Hardward Offload) VXLAN ho\u1eb7c NVGRE ho\u1eb7c giao th\u1ee9c nh\u01b0 b\u1ea3ng tr\xean th\xec GENEVE c\xf3 th\u1ec3 truy\u1ec1n packet theo \u0111\xfang giao th\u1ee9c c\u1ee7a Offload \u0111\xf3, v\xed d\u1ee5 VXLAN, c\xf2n n\u1ebfu thi\u1ebft b\u1ecb kh\xf4ng h\u1ed7 tr\u1ee3 th\xec n\xf3 v\u1eabn c\xf3 th\u1ec3 truy\u1ec1n data v\xe0 t\u1ef1 Offload kh\xf4ng th\xf4ng qua ph\u1ea7n c\u1ee9ng"),(0,r.kt)("p",null,"G\xf3i tin c\u1ee7a VXLAN b\xean d\u01b0\u1edbi"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(7334).Z})),(0,r.kt)("p",null,"V\u1eady \u0111i\u1ec1u \u0111\xf3 c\xf3 ngh\u0129a l\xe0 c\xe1c thi\u1ebft b\u1ecb c\xf3 h\u1ed7 tr\u1ee3 Hardware Offload c\u1ee7a c\xe1c giao th\u1ee9c tr\xean s\u1ebd c\xf3 performance t\u1ed1t h\u01a1n. Nh\u1eefng thi\u1ebft b\u1ecb kh\xf4ng c\xf3 Hardware Offload th\xec v\u1eabn c\xf3 th\u1ec3 d\xf9ng GENEVE \u0111\u1ec3 giao ti\u1ebfp v\xe0 g\u1ea7n nh\u01b0 l\xe0 m\u1ed9t giao th\u1ee9c phi\xean d\u1ecbch \u0111\u1ee9ng \u1edf gi\u1eefa cho c\xe1c giao th\u1ee9c tr\xean"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PowerEdge R750"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Interface"),": ",(0,r.kt)("strong",{parentName:"li"},"Broadcom NetXtreme E-Series Quad-port 25Gb OCP 3.0 Ethernet Adapter"))))),(0,r.kt)("p",null,"\u0110\xe2y l\xe0 m\u1ed9t trong server m\u1edbi v\u1edbi card h\u1ed7 tr\u1ee3 Hardward Offload VXLAN / NVGRE v\xe0 GENEVE"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.broadcom.com/doc/12395116"},"https://docs.broadcom.com/doc/12395116")),(0,r.kt)("h2",{id:"n-vds"},"N-VDS"),(0,r.kt)("p",null,"Trong NSX-T th\xec khi c\xe1c Node join v\xe0o c\u1ee5m th\xec s\u1ebd \u0111\u01b0\u1ee3c c\xe0i \u0111\u1eb7t m\u1ed9t lo\u1ea1i switch \u1ea3o g\u1ecdi l\xe0 N-VDS, gi\u1ed1ng v\u1edbi vi\u1ec7c khi join v\xe0o vCenter th\xec vCenter s\u1ebd \u0111\u1ea9y VDS xu\u1ed1ng c\xe1c Host. N-VDS trong NSX-T l\xe0 m\u1ed9t lo\u1ea1i switch t\u01b0\u01a1ng t\u1ef1 nh\u01b0 VDS nh\u01b0ng \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf v\u1edbi c\xe1c ch\u1ee9c n\u0103ng t\u01b0\u01a1ng \u0111\u01b0\u01a1ng trong NSX-T, GENEVE Overlay l\xe0 m\u1ed9t v\xed d\u1ee5."),(0,r.kt)("p",null,"Tuy nhi\xean t\u1eeb c\xe1c b\u1ea3n tr\u01b0\u1edbc 3.0. N-VDS \u0111\u01b0\u1ee3c c\xe0i ri\xeang bi\u1ec7t v\u1edbi VDS, ngh\u0129a l\xe0 N-VDS \u0111\u01b0\u1ee3c qu\u1ea3n l\xfd b\u1edfi NSX-T Manager v\xe0 VDS v\u1eabn thu\u1ed9c qu\u1ea3n l\xfd c\u1ee7a vCenter. T\u1eeb 3.0 tr\u1edf \u0111i th\xec VMware \u0111\xe3 thi\u1ebft k\u1ebf \u0111\u1ec3 t\u1eadn d\u1ee5ng VDS b\u1eb1ng c\xe1ch th\xeam m\u1ed9t t\xf9y ch\u1ecdn l\xe0 c\xe0i N-VDS tr\xean VDS, t\u1ee9c l\xe0 N-VDS v\u1eabn \u0111\u01b0\u1ee3c c\xe0i ri\xeang nh\u01b0ng s\u1ebd build-on-top c\u1ee7a VDS. T\u1eadn d\u1ee5ng \u0111\u01b0\u1ee3c VDS, v\u1ec1 b\u1ea3n ch\u1ea5t ch\xfang v\u1eabn ri\xeang bi\u1ec7t v\u1edbi nhau, nh\u01b0ng c\u1ea5u h\xecnh l\u1ea1i gi\xfap cho ch\xfang li\xean quan v\u1edbi nhau. Thi\u1ebft k\u1ebf n\xe0y gi\xfap \u0111\u01a1n gi\u1ea3n h\xf3a vi\u1ec7c c\u1ea5u h\xecnh NSX-T tr\xean VMware vSphere h\u01a1n r\u1ea5t nhi\u1ec1u."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"N-VDS l\xe0 m\u1ed9t V-Switch Software c\u1ee7a NSX-T Manager xu\u1ed1ng c\xe1c Node"))),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"N-VDS built-on-top VDS ch\u1ec9 ho\u1ea1t \u0111\u1ed9ng n\u1ebfu NSX-T l\xe0 3.0 v\xe0 vSphere VDS l\xe0 7.0 tr\u1edf l\xean"))),(0,r.kt)("h2",{id:"segments-logical-switch"},"Segments (logical switch)"),(0,r.kt)("p",null,"M\u1ed9t Segments \u0111\u01b0\u1ee3c t\u1ea1o t\u01b0\u01a1ng \u0111\u01b0\u01a1ng v\u1edbi vi\u1ec7c t\u1ea1o PortGroup tr\xean vCenter, nh\u01b0ng Segments \u1edf NSX-T kh\xf4ng ch\u1ec9 t\u1ea1o ra Port, ch\xfang t\u1ea1o ra Logical Switch."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(1187).Z})),(0,r.kt)("p",null,"V\u1edbi vi\u1ec7c s\u1eed d\u1ee5ng VDS tr\xean vCenter, c\xe1c PortGroup c\xf9ng VLAN s\u1ebd \u0111\u1ec1u th\xf4ng su\u1ed1t v\u1edbi nhau, g\xf3i tin thu\u1ea7n t\xfay lu\xf4n l\xe0 Layer 2 v\xe0 \u0111\u01b0\u1ee3c truy\u1ec1n th\u1eb3ng t\u1edbi VM -> VDS -> VM nh\u01b0 sau."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"|-----------------------------------------------------------------------------\n|      VM 1     |                  VDSwitch                  |      VM 2     |\n| (Port in VDS) | => | (Port Group) | => | (Port Group) | => | (Port in VDS) |\n|    (Host A)   |    |   (Host A)   |    |   (Host B)   |    |    (Host B)   |\n|-----------------------------------------------------------------------------\n")),(0,r.kt)("p",null,"Tr\xean NSX th\xec N-VDS s\u1ebd t\u1ea1o ra logical switch, tr\u01b0\u1edbc \u0111\xe2y NSX-V g\u1ecdi t\xean l\xe0 Logical Switch, nh\u01b0ng NSX-T g\u1ecdi n\xf3 l\xe0 Segments, c\xf3 l\u1ebd vi\u1ec7c n\xe0y \u0111\u1ec3 tr\xe1nh b\u1ecb hi\u1ec3u nh\u1ea7m l\xe0 sao \u0111\xe3 c\xf3 N-VDS l\xe0 Switch r\u1ed3i th\xec t\u1ea1i sao l\u1ea1i c\xf3 th\xeam m\u1ed9t l\u1edbp Switch n\u1eefa ? Th\u1ef1c ra \u0111\xe2y kh\xf4ng ph\u1ea3i l\xe0 Switch \u1ea3o n\u1eb1m trong N-VDS, n\xf3 l\xe0 m\u1ed9t c\u1ea5u h\xecnh \u0111\u01b0\u1ee3c ph\xe2n t\xe1ch g\u1ecdi l\xe0 Domain gi\u1ed1ng nh\u01b0 c\xe1c thi\u1ebft b\u1ecb m\u1ea1ng kh\xe1c. T\u1eeb b\xe2y gi\u1edd ta s\u1ebd g\u1ecdi n\xf3 l\xe0 Segments, tuy n\u1eb1m trong c\xf9ng m\u1ed9t Switch l\xe0 V-VDS v\xe0 th\u1eadm ch\xed c\xf3 th\u1ec3 c\xf9ng Transport Zone, nh\u01b0ng gi\u1eefa c\xe1c Segments l\xe0 \u0111\u1ed9c l\u1eadp v\u1edbi nhau. M\u1ed7i m\u1ed9t Segments \u0111\u01b0\u1ee3c t\u1ea1o ra s\u1ebd \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng g\xe1n m\u1ed9t VNI (Network ID) kh\xe1c nhau, do \u0111\xf3 c\xf3 th\u1ec3 t\xe1ch \u0111\u01b0\u1ee3c lu\u1ed3ng traffic ri\xeang bi\u1ec7t gi\u1eefa c\xe1c VM gi\u1ed1ng nh\u01b0 VLAN PortGroup tr\xean VDS, tuy nhi\xean trong Segments c\u1ee7a NSX-T, ta c\xf2n c\xf3 th\u1ec3 c\u1ea5u h\xecnh c\xe1c ch\u1ee9c n\u0103ng c\u1ee7a Layer 3 tr\xean Segments n\xe0y. T\xf3m l\u1ea1i th\xec N-VDS th\u1ef1c ch\u1ea5t l\xe0 V-Switch Layer 3 v\xe0 Segments l\xe0 m\u1ed9t Domain mang c\u1ea5u h\xecnh ri\xeang bi\u1ec7t \u0111\u01b0\u1ee3c Apply c\xe1c ch\u1ee9c n\u0103ng c\u1ee7a c\u1ea3 Layer 2 v\xe0 Layer  3 t\u1eeb N-VDS."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(7839).Z})),(0,r.kt)("p",null,"Segments mang theo nhi\u1ec1u t\xednh n\u0103ng c\u1ee7a Layer 3 n\xean c\u0169ng b\u1ea3o m\u1eadt h\u01a1n, g\xf3i tin v\u1eeba giao ti\u1ebfp \u0111\u01b0\u1ee3c \u1edf Layer 2 nh\u1edd v\xe0o vi\u1ec7c m\u1ed7i Segments c\xf3 m\u1ed9t VNI ri\xeang bi\u1ec7t, trong tr\u01b0\u1eddng h\u1ee3p VM c\xf3 c\xf9ng Segments th\xec ch\xfang v\u1eabn c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c Apply c\xe1c Rule \u1edf Layer 3."),(0,r.kt)("p",null,"V\xed d\u1ee5 cho use-case c\u1ee7a thi\u1ebft k\u1ebf n\xe0y \u0111\xf3 l\xe0 khi 2 VM c\xf9ng Segments, ch\xfang c\xf3 th\u1ec3 giao ti\u1ebfp v\u1edbi nhau khi n\u1eb1m c\xf9ng m\u1ed9t Segment, nh\u01b0ng n\u1ebfu mu\u1ed1n \u0111\u1eb7t m\u1ed9t Firewall rule \u1edf gi\u1eefa c\xe1c VM c\xf9ng m\u1ed9t Segments (NSX-T PortGroup), th\u1eadm ch\xed c\xe1c VM n\xe0y c\xf9ng n\u1eb1m tr\xean m\u1ed9t ESXI node, rule v\u1eabn s\u1ebd \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng cho 2 VM n\xe0y, rule n\xe0y c\xf3 th\u1ec3 l\xe0 Rule \u1edf Layer 2, Rule \u1edf Layer 3 theo IP, Rule \u1edf Layer 7 theo giao th\u1ee9c \u1ee9ng d\u1ee5ng. C\xe1c rule n\xe0y th\u01b0\u1eddng l\xe0 Stateful n\xean kh\xe1 d\u1ec5 d\xe0ng thi\u1ebft l\u1eadp v\xe0 c\xe0i \u0111\u1eb7t."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(8953).Z})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"B\xe0i vi\u1ebft g\u1ed1c: ",(0,r.kt)("a",{parentName:"li",href:"https://blogs.vmware.com/networkvirtualization/2016/06/micro-segmentation-defined-nsx-securing-anywhere.html/"},"https://blogs.vmware.com/networkvirtualization/2016/06/micro-segmentation-defined-nsx-securing-anywhere.html/"))),(0,r.kt)("h2",{id:"transport-nodes"},"Transport Nodes"),(0,r.kt)("p",null,"Khi t\u1ea5t c\u1ea3 nh\u1eefng Policy \u1edf tr\xean \u0111\xe3 kh\u1edfi t\u1ea1o v\xe0 \u0111\u1ecbnh ngh\u0129a ra. C\xe1c Node s\u1ebd ph\u1ea3i \u0111\u01b0\u1ee3c apply v\xe0o. NSX-T h\u1ed7 tr\u1ee3 ESXI Node v\xe0 th\u1eadm ch\xed l\xe0 c\u1ea3 c\xe1c h\u1ec7 th\u1ed1ng \u1ea3o h\xf3a kh\xe1c nh\u01b0 KVM ho\u1eb7c m\u1ed9t node ch\u1ea1y Linux OS nh\u01b0 CentOS, Ubuntu. Tuy nhi\xean ta s\u1ebd ch\u1ec9 n\xf3i v\u1ec1 hai Transport Node c\u1ee7a VMware ch\xednh \u0111\xf3 l\xe0"),(0,r.kt)("h3",{id:"vsphere-esxi-node"},"vSphere ESXi Node"),(0,r.kt)("p",null,"\u1ede ph\u1ea7n N-VDS th\xec ESXi Node c\xf3 th\u1ec3 c\u1ea5u h\xecnh VDS v\xe0 N-VDS built-on-top VDS. M\u1ed9t ESXi Node c\xf3 N-VDS c\xf3 ngh\u0129a l\xe0 n\xf3 \u0111\xe3 tr\u1edf th\xe0nh m\u1ed9t Transport Node v\xe0 c\xf3 th\u1ec3 nh\u1eadn c\xe1c ch\u1ee9c n\u0103ng, c\u1ea5u h\xecnh c\u1ee7a NSX-T. ESXi Node l\xe0 Transport Node th\xec s\u1ebd g\u1ecdi l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"Host Transport Node")),(0,r.kt)("h3",{id:"nsx-t-edge-node"},"NSX-T Edge Node"),(0,r.kt)("p",null,"Trong \u0111\xf3 Edge Node \u0111\xf3ng vai tr\xf2 g\u1ea7n gi\u1ed1ng nh\u01b0 m\u1ed9t Router Layer 3-7 c\u1ea5p cao, Edge Node c\u0169ng \u0111\xf3ng vai tr\xf2 l\xe0m Gateway cho traffic gi\u1eefa c\xe1c Cluster ho\u1eb7c traffic \u0111i ra ngo\xe0i. Edge Node c\xf3 th\u1ec3 deploy d\u01b0\u1edbi d\u1ea1ng m\xe1y \u1ea3o v\u1edbi 4 sizing nh\u01b0 sau"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/installation/GUID-22F87CA8-01A9-4F2E-B7DB-9350CA60EA4E.html"},"https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/installation/GUID-22F87CA8-01A9-4F2E-B7DB-9350CA60EA4E.html")),(0,r.kt)("p",null,"V\u1edbi m\u1ed7i sizing c\xe0ng cao th\xec kh\u1ea3 n\u0103ng ch\u1ecbu t\u1ea3i t\u1ed1t h\u01a1n c\u0169ng nh\u01b0 c\xf3 th\u1ec3 s\u1eed d\u1ee5ng nhi\u1ec1u t\xednh n\u0103ng c\u1ee7a NSX-T h\u01a1n."),(0,r.kt)("p",null,"Edge Node c\xf3 th\u1ec3 c\u1ea5u h\xecnh VLAN Uplink \u0111i ra ngo\xe0i Cluster v\xe0 ch\u1ec9 c\xf3 Edge Node m\u1edbi l\xe0m \u0111\u01b0\u1ee3c \u0111i\u1ec1u n\xe0y, n\u1ebfu kh\xf4ng c\xf3 Edge Node th\xec c\xe1c VM trong c\xe1c Transport Node kh\xf4ng th\u1ec3 n\xe0o \u0111i ra ngo\xe0i ho\u1eb7c \u0111i sang Segments kh\xe1c \u0111\u01b0\u1ee3c. Edge Node ch\u1ec9 th\u1ef1c hi\u1ec7n ch\u1ee9c n\u0103ng Network Workload, n\xf3 kh\xf4ng ch\u1ee9a VM g\xec b\xean trong."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("em",{parentName:"p"},"Core c\u1ee7a NSX-T s\u1eed d\u1ee5ng Docker v\xe0 c\xf4ng ngh\u1ec7 Container"))),(0,r.kt)("p",null,"NSX-T khi \u0111\u01b0\u1ee3c deploy v\xe0 \u0111\u01b0\u1ee3c c\xe0i N-VDS c\u0169ng s\u1ebd tr\u1edf th\xe0nh m\u1ed9t Transport Node, g\u1ecdi l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"Edge Transport  Node")),(0,r.kt)("h2",{id:"logical-router"},"Logical Router"),(0,r.kt)("p",null,"Bao g\u1ed3m Service Router (SR) v\xe0 Distributed Routing (DR). Router n\xe0y ho\u1ea1t \u0111\u1ed9ng n\u1ebfu Node \u0111\u01b0\u1ee3c g\u1eafn v\xe0o Tier-0/1 Gateway"),(0,r.kt)("h2",{id:"service-router-sr-v\xe0-distributed-routing-dr"},"Service Router (SR) v\xe0 Distributed Routing (DR)"),(0,r.kt)("h3",{id:"distributed-routing-dr"},"Distributed Routing (DR)"),(0,r.kt)("p",null,"DR s\u1ebd \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o v\xe0 ch\u1ea1y tr\xean t\u1ea5t c\u1ea3 c\xe1c Transport Node, \u0111\xfang nh\u01b0 t\xean g\u1ecdi c\u1ee7a n\xf3, Routing gi\u1eefa c\xe1c VM khi \u0111i qua Gateway m\xe0 trong c\xf9ng c\xe1c Node trong Cluster, n\xf3 s\u1ebd route \u0111\u1ebfn t\u1ea5t c\u1ea3 c\xe1c Node, trong tr\u01b0\u1eddng h\u1ee3p ta c\xf3 2 VM \u1edf 2 Segments kh\xe1c nhau, c\xf3 th\u1ec3 hi\u1ec3u nh\u01b0 2 v\xf9ng m\u1ea1ng kh\xe1c nhau th\xec lu\u1ed3ng c\u1ee7a ch\xfang \u0111i nh\u01b0 sau"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Host A"),": VM 1 (Segment A)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Host B"),": VM 2 (Segment B)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"|--------------------------------------------------------------------------------------------------------\n|   VM 1   | => | Logical Switch | => | T0-1 Gateway              | => | Logical Switch | => |   VM 2   |\n| (Host A) |    |    (Host A)    |    |   (Logical Router)        |    |    (Host B)    |    | (Host B) |\n|          |    |                |    |     (Distributed Routing) |    |                |    |          |\n|--------------------------------------------------------------------------------------------------------\n")),(0,r.kt)("h3",{id:"service-router-sr"},"Service Router (SR)"),(0,r.kt)("p",null,"Ch\u1ecbu tr\xe1ch nhi\u1ec7m th\u1ef1c hi\u1ec7n c\xe1c nhi\u1ec7m v\u1ee5 sau"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Connectivity to physical infrastructure"),(0,r.kt)("li",{parentName:"ol"},"NAT"),(0,r.kt)("li",{parentName:"ol"},"DHCP server"),(0,r.kt)("li",{parentName:"ol"},"MetaData Proxy"),(0,r.kt)("li",{parentName:"ol"},"Edge Firewall"),(0,r.kt)("li",{parentName:"ol"},"Load Balancer")),(0,r.kt)("p",null,"SR ho\u1ea1t \u0111\u1ed9ng trong Edge Node khi Edge Node link t\u1edbi Tier-0 gateway. Ch\u1ee7 y\u1ebfu th\u1ef1c hi\u1ec7n c\xe1c ch\u1ee9c n\u0103ng m\u1ea1ng d\u1ea1ng statefull nh\u01b0 tr\xean"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(823).Z})),(0,r.kt)("p",null,"H\xecnh tr\xean m\xf4 t\u1ea3 v\u1ec1 SR, s\u1eed d\u1ee5ng NAT ra ngo\xe0i Internet qua Edge Node. Edge Node \u1edf h\xecnh tr\xean \u0111\u01b0\u1ee3c g\u1eafn Uplink n\u1ed1i ra ngo\xe0i WAN Internet, trong v\xed d\u1ee5 n\xe0y khi \u0111i ra ngo\xe0i Internet ta s\u1ebd ph\u1ea3i NAT, m\xe0 m\u1ed7i l\u1ea7n NAT ra IP Public t\u1eeb IP Private th\xec \u0111i ra t\u1eeb \u0111\u01b0\u1eddng n\xe0o s\u1ebd ph\u1ea3i \u0111i v\xe0o b\u1eb1ng \u0111\u01b0\u1eddng \u0111\xf3. V\u1eady Service Router l\xe0 m\u1ed9t use-case nh\u01b0 v\xe2y."),(0,r.kt)("h6",{id:"k\u1ebft-h\u1ee3p-gi\u1eefa-sr-v\xe0-dr"},"K\u1ebft h\u1ee3p gi\u1eefa SR v\xe0 DR"),(0,r.kt)("p",null,"\u1ede m\xf4 t\u1ea3 v\u1ec1 SR th\xec SR c\xf3 th\u1ec3 d\xf9ng \u0111\u1ec3 k\u1ebft n\u1ed1i ra ngo\xe0i, nh\u01b0ng \u0111\u1ec3 k\u1ebft n\u1ed1i \u0111\u01b0\u1ee3c ra ngo\xe0i. Ch\xfang v\u1eabn ph\u1ea3i \u0111i qua DR.  Trong h\xecnh d\u01b0\u1edbi ta th\u1ea5y 2 VM Web-LS c\xf3 IP l\xe0 172.16.10.11 v\xe0 172.16.10.12, \u0111\u1ec3 \u0111i ra \u0111\u01b0\u1ee3c m\u1ea1ng kh\xe1c hay l\xe0 ra ngo\xe0i th\xec ch\xfang ph\u1ea3i c\xf3 Gateway IP, Gateway IP n\xe0y n\u1eb1m tr\xean Logical Router c\xf3 \u0111\u1ecba ch\u1ec9 l\xe0 172.16.10.1. \u0110\u1ecba ch\u1ec9 n\xe0y ch\xednh l\xe0 DR, trong tr\u01b0\u1eddng h\u1ee3p k\u1ebft n\u1ed1i gi\u1eefa 2 Segments n\u1ed9i b\u1ed9 th\xec DR th\xec \u0111\u1ecbnh tuy\u1ebfn sang d\u1ea3i m\u1ea1ng \u1edf Segments m\xe0 DR c\xf3 th\u1ec3 \u0111\u1ecbnh tuy\u1ebfn t\u1edbi, trong h\xecnh th\xec ta th\u1ea5y c\xf3 App-LS c\xf3 IP l\xe0 172.16.20.11 v\xe0 gateway l\xe0 172.16.20.1. N\u1ebfu \u0111i t\u1eeb Web-LS (172.16.10.x) t\u1edbi App-LS (172.16.20.x) th\xec ch\xfang \u0111i nh\u01b0 sau"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"|----------------------------------------------------------------------------------------------------\n| Web-LS | => | Logical Switch | => | T0-1 Gateway              | => | Logical Switch | => | App-LS |\n|        |    |                |    |   (Logical Router)        |    |                |    |        |\n|        |    |                |    |     (Distributed Routing) |    |                |    |        |\n|----------------------------------------------------------------------------------------------------\n")),(0,r.kt)("p",null,"Ti\u1ebfp \u0111\u1ebfn l\xe0 t\u1eeb Web-LS \u0111i ra b\xean ngo\xe0i. Ch\xednh l\xe0 c\xe1i Physical Router kia, ch\xfang s\u1ebd \u0111i theo flow tr\xean nh\u01b0ng ph\u1ea3i \u0111i qua SR t\u1eeb DR. T\u1eeb DR t\u1edbi SR, Logical Router s\u1ebd ph\u1ea3i Route qua m\u1ed9t Transit link b\u1eb1ng vi\u1ec7c s\u1eed d\u1ee5ng m\u1ed9t d\u1ea3i IP Linklocal IPv4 l\xe0 169.254.0.0/28. V\u1ec1 b\u1ea3n ch\u1ea5t th\xec SR v\xe0 DR c\xf9ng n\u1eb1m trong m\u1ed9t Logical Router n\xean vi\u1ec7c s\u1eed d\u1ee5ng Linklocal IPv4 \u0111\u1ec3 transit gi\u1eefa 2 lo\u1ea1i Routing n\xe0y l\xe0 ho\xe0n to\xe0n h\u1ee3p l\xfd"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"|-------------------------------------------------------------------------------------------------\n| Web-LS | => | Logical Switch | => | T0-1 Gateway                               |    |          |\n|        |    |                |    |   (Logical Router) =======>>>> Transit LS  |    | Physical |\n|        |    |                |    |     (Distributed Routing) ==== 169.254.0.1 |    | Router   |\n|        |    |                |    |     (Service Router)========== 169.254.0.2 | => | Uplink   |\n|-------------------------------------------------------------------------------------------------\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(2696).Z})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"L\u01b0u \xfd, ph\u1ea7n n\xe0y ch\u1ec9 m\xf4 t\u1ea3 v\u1ec1 Logical Router \u1edf b\xean trong khi g\xf3i tin ch\u1ea1y trong m\u1ed9t Gateway, kh\xf4ng ph\u1ea3i l\xe0 gi\u1eefa T0 v\xe0 T1 Gateway")),(0,r.kt)("h2",{id:"edge-bridge"},"Edge Bridge"),(0,r.kt)("p",null,"S\u1eed d\u1ee5ng \u0111\u1ec3 bridge t\u1eeb h\u1ec7 th\u1ed1ng m\u1ea1ng v\u1eadt l\xfd ho\u1eb7c b\xean ngo\xe0i h\u1ea1 t\u1ea7ng NSX-T tr\u1ef1c ti\u1ebfp qua Layer 2. Use case \u0111\xf3 l\xe0 bridge h\u1ea1 t\u1ea7ng ngo\xe0i v\xe0 h\u1ea1 t\u1ea7ng b\xean trong khi ch\xfang c\xf9ng d\u1ea3i m\u1ea1ng. Xem v\xed d\u1ee5 b\xean h\xecnh d\u01b0\u1edbi ."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(4433).Z})),(0,r.kt)("p",null,"T\xednh n\u0103ng n\xe0y s\u1eed d\u1ee5ng trong Use-case khi h\u1ec7 th\u1ed1ng m\u1ea1ng c\xf9ng s\u1eed d\u1ee5ng c\u1ea3 m\xf4 h\xecnh VLAN c\u0169 truy\u1ec1n th\u1ed1ng k\u1ebft h\u1ee3p v\u1edbi NSX. V\xed d\u1ee5 c\xf3 6 VM ch\u1ea1y \u1ee9ng d\u1ee5ng \u1edf h\u1ec7 th\u1ed1ng m\u1ea1ng X, ti\u1ebfp \u0111\xf3 ta ch\u1ea1y \u1ea3o h\xf3a v\xe0 \u0111\u01b0a \u0111\u01b0\u1ee3c 3 VM sang \u1ea3o h\xf3a, sau \u0111\xf3 cho 3 VM n\xe0y \u0111\u01b0a v\xe0o NSX-T \u0111\u1ec3 ch\u1ea1y Network c\u1ee7a NSX. Tuy nhi\xean k\u1ebft n\u1ed1i c\u1ee7a nh\xf3m 3 VM \u1edf h\u1ea1 t\u1ea7ng c\u0169 v\xe0 nh\xf3m 3 VM \u1edf NSX kh\xf4ng th\u1ec3 thay \u0111\u1ed5i c\u1ea5u h\xecnh b\xean trong m\xe1y \u1ea3o v\xec m\u1ed9t l\xfd do n\xe0o \u0111\xf3, n\xean k\u1ebft n\u1ed1i c\u1ee7a ch\xfang v\u1eabn l\xe0 k\u1ebft n\u1ed1i c\u0169, v\xed d\u1ee5 t\u1eeb App k\u1ebft n\u1ed1i sang Database c\xf9ng d\u1ea3i m\u1ea1ng c\u0169, kh\xf4ng th\u1ec3 thay \u0111\u1ed5i thay \u0111\u1ed5i c\u1ea5u h\xecnh n\xe0y, ph\u1ea3i gi\u1eef nguy\xean. V\u1eady ta s\u1ebd d\xf9ng Bridge t\u1eeb Edge (v\xec Edge Node m\u1edbi c\xf3 Uplink ra ngo\xe0i \u0111\u01b0\u1ee3c), sau \u0111\xf3 bridge uplink \u0111\xf3 sang h\u1ec7 th\u1ed1ng m\u1ea1ng VLAN c\u0169, v\u1eady l\xe0 Edge Node \u0111\xf3ng vai tr\xf2 l\xe0 thi\u1ebft b\u1ecb Bridge, 3 VM b\xean trong NSX c\xf3 th\u1ec3 l\xe0 b\u1ea5t c\u1ee9 Overlay Segment n\xe0o, nh\u01b0ng \u0111i qua Bridge c\u1ee7a Edge Node, g\xf3i tin s\u1ebd \u0111\u01b0\u1ee3c truy\u1ec1n qua Layer 2 qua Edge Node v\xe0 t\u1edbi \u0111\u01b0\u1ee3c h\u1ec7 th\u1ed1ng m\u1ea1ng VLAN c\u0169."),(0,r.kt)("p",null,"3 VM \u1edf h\u1ec7 th\u1ed1ng m\u1ea1ng VLAN c\u0169 s\u1ebd ch\u1ec9 giao ti\u1ebfp \u0111\u01b0\u1ee3c v\u1edbi VM \u1edf nh\xf3m \u0111\u01b0\u1ee3c Bridge trong NSX, m\u1eb7c d\xf9 c\xf9ng d\u1ea3i m\u1ea1ng v\xe0 \u0111\u01b0\u1ee3c Bridge v\u1edbi nhau qua Edge Node nh\u01b0ng 3 VM \u1edf ngo\xe0i kia kh\xf4ng n\u1eb1m trong Transport Node c\u0169ng nh\u01b0 kh\xf4ng n\u1eb1m trong Transport Zone n\xean kh\xf4ng th\u1ec3 giao ti\u1ebfp \u0111\u01b0\u1ee3c v\u1edbi c\xe1c h\u1ec7 th\u1ed1ng kh\xe1c trong NSX. Tuy nhi\xean 3 VM \u1edf trong n\u1ebfu c\xf3 Route sang c\xe1c Segments kh\xe1c th\xec ch\xfang v\u1eabn giao ti\u1ebfp \u0111\u01b0\u1ee3c v\u1edbi nhau, ch\u1ec9 3 VM \u1edf ngo\xe0i l\xe0 giao ti\u1ebfp ri\xeang bi\u1ec7t v\u1edbi 3 b\xean trong NSX."),(0,r.kt)("h1",{id:"c\u1ea5u-h\xecnh-t\u1ed5ng-quan"},"C\u1ea5u h\xecnh t\u1ed5ng quan"),(0,r.kt)("h2",{id:"flow-diagram"},"Flow Diagram"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:e(7889).Z})))}d.isMDXComponent=!0},7334:function(n,t,e){t.Z=e.p+"assets/images/geneve-vxlan-header-3abc082e834c201db223ae7e4c6adddb.png"},7499:function(n,t,e){t.Z=e.p+"assets/images/geneve-b6ce979e5373edb19b1655edf91f598a.png"},2250:function(n,t,e){t.Z=e.p+"assets/images/leaf-spine-topo-6b354a8d5307b9c621dbc27a27fdd52d.png"},7889:function(n,t,e){t.Z=e.p+"assets/images/nsxt-config-flow-7f095be758815ca4bcd0dee7e2d5dd28.png"},8953:function(n,t,e){t.Z=e.p+"assets/images/nsxt-dfw-a8617c7f18d1d63562fb25ad00bb0709.png"},2696:function(n,t,e){t.Z=e.p+"assets/images/nsxt-dr-to-sr-efd3a0b240081e402db59274a32c19d2.png"},4433:function(n,t,e){t.Z=e.p+"assets/images/nsxt-edge-bridge-acba9afbce0ff055cc977e8e423ca8a6.png"},1729:function(n,t,e){t.Z=e.p+"assets/images/nsxt-multi-tier-d3afb5396b17c4556abf629f2fc9f832.png"},6021:function(n,t,e){t.Z=e.p+"assets/images/nsxt-routing-architecture-a1c3d8ab8bd92cddc846d44d760ddac5.png"},7839:function(n,t,e){t.Z=e.p+"assets/images/nsxt-segment-demo-80fa70739177daafc09c6c2c31b5c496.png"},1187:function(n,t,e){t.Z=e.p+"assets/images/nsxt-segment-ls-with-vds-2d070906c4a7c156076d00eaa8c6c4ac.png"},8490:function(n,t,e){t.Z=e.p+"assets/images/nsxt-single-tier-c95d65fe2b13894a3d00965743bfa767.png"},823:function(n,t,e){t.Z=e.p+"assets/images/nsxt-sr-topo-6a6b7ebf7991584d5c6fea5dc68a40e0.png"},2086:function(n,t,e){t.Z=e.p+"assets/images/nsxt-transport-zone-3e81009ea0094b137a24c6920a795532.png"},5262:function(n,t,e){t.Z=e.p+"assets/images/overlay-6d8a734e03ccbe86b173a7f08931c3d8.png"}}]);