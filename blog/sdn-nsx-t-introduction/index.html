<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/system.conf/blog/rss.xml" title="System.conf Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/system.conf/blog/atom.xml" title="System.conf Blog Atom Feed"><title data-react-helmet="true">Tổng quan về SDN và VMware NSX-T | System.conf</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://scila1996.github.io/system.conf/blog/sdn-nsx-t-introduction"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Tổng quan về SDN và VMware NSX-T | System.conf"><meta data-react-helmet="true" name="description" content="East-West traffic và North-South traffic"><meta data-react-helmet="true" property="og:description" content="East-West traffic và North-South traffic"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-09-15T19:01:06.885Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/scila1996"><meta data-react-helmet="true" property="article:tag" content="nsxt,nsx,vmware,sdn,network,virtualization"><link data-react-helmet="true" rel="canonical" href="https://scila1996.github.io/system.conf/blog/sdn-nsx-t-introduction"><link data-react-helmet="true" rel="alternate" href="https://scila1996.github.io/system.conf/blog/sdn-nsx-t-introduction" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://scila1996.github.io/system.conf/blog/sdn-nsx-t-introduction" hreflang="x-default"><link rel="stylesheet" href="/system.conf/assets/css/styles.9e7bfb73.css">
<link rel="preload" href="/system.conf/assets/js/runtime~main.d3cada47.js" as="script">
<link rel="preload" href="/system.conf/assets/js/main.387993f1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/system.conf/"><img src="https://vmware.github.io/images/vmw_oss.svg" alt="My config" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="https://vmware.github.io/images/vmw_oss.svg" alt="My config" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">System.conf</b></a><a class="navbar__item navbar__link" href="/system.conf/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/system.conf/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scila1996/system.conf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Tổng quan về SDN và VMware NSX-T</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-15T19:01:06.885Z" itemprop="datePublished">September 15, 2021</time> · 21 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/scila1996" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/scila1996/system.conf/raw/main/static/img/mr-f.jpg" alt="Nguyen Trung"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/scila1996" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nguyen Trung</span></a></div><small class="avatar__subtitle" itemprop="description">System Engineer - currently working at MB SHINSEI</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="east-west-traffic-và-north-south-traffic"></a>East-West traffic và North-South traffic<a class="hash-link" href="#east-west-traffic-và-north-south-traffic" title="Direct link to heading">#</a></h2><p>Thuật ngữ sử dụng trong DataCenter, các SDN phát triển dựa vào hạ tầng DataCenter nên sẽ sử dụng các thuật ngữ này.</p><ul><li><code>East-West</code>: Đây là traffic nằm bên trong DataCenter, ví dụ giữa server với server.</li><li><code>North-South</code>: Đây là traffic từ client đến server hoặc từ server ra ngoài Internet, bao gồm tất cả các kết nối từ DataCenter ra ngoài hoặc từ ngoài vào trong DataCenter.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="kiến-trúc-mạng-leaf-spine"></a>Kiến trúc mạng Leaf-Spine<a class="hash-link" href="#kiến-trúc-mạng-leaf-spine" title="Direct link to heading">#</a></h2><p><img alt="image" src="/system.conf/assets/images/leaf-spine-topo-6b354a8d5307b9c621dbc27a27fdd52d.png"></p><p>Leaf Switch cung cấp các kết nối tới các máy chủ, Firewall, Router hoặc các thiết bị cân bằng tải. Các Leaf switch được kết nối tới tất cả Spine tạo thành mô hình Full-mesh nhưng không kết nối với nhau (Leaf-Leaf) trừ khi sử dụng các công nghệ HA như vPC, Stackwise, IRF.</p><p>Spine Switch được sử dụng để kết nối với tất cả Leaf switch. Các Spine switch cũng không kết nối với các Spine switch khác để tạo thành mô hình có cùng bước nhảy giữa các máy chủ. Điều này mang lại độ trễ có thể dự đoán và băng thông cao giữa các máy chủ. Liên kết giữa Leaf và Spine có thể là liên kết Layer 2 hoặc Layer 3 sử dụng các giao thức định tuyến như iBGP.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="thiết-kế-hạ-tầng-network"></a>Thiết kế hạ tầng Network<a class="hash-link" href="#thiết-kế-hạ-tầng-network" title="Direct link to heading">#</a></h2><p>Dựa theo tài liệu của VMware, VMware Validated Design</p><p><a href="https://docs.vmware.com/en/VMware-Validated-Design/6.2/sddc-architecture-and-design-for-the-management-domain/GUID-C924E896-D9C4-47BF-91D5-DF72605EF63E.html" target="_blank" rel="noopener noreferrer">https://docs.vmware.com/en/VMware-Validated-Design/6.2/sddc-architecture-and-design-for-the-management-domain/GUID-C924E896-D9C4-47BF-91D5-DF72605EF63E.html</a></p><p>Tài liệu này mô tả về việc thiết kế hệ thống VMware sử dụng NSX-T. Mô tả tổng quan về kiến trúc ứng dụng mô hình ví dụ CAA (Core-Aggregation-Access), Leaf-Spine. Hướng dẫn mô tả kết nối, tạo và chuẩn bị các VLAN, Subnets ở phần Underlay.</p><p>Danh sách các chức năng cần thiết trong hạ tầng NSX-T. Tạo VLAN và từng Subnets tương ứng với từng chức năng</p><ul><li><code>Management</code></li><li><code>vSphere vMotion</code></li><li><code>vSAN</code></li><li><code>Host Overlay</code></li><li><code>NFS</code></li><li><code>Uplink01</code></li><li><code>Uplink02</code></li><li><del><code>Edge Overlay</code></del></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="không-gian-địa-chỉ-mạng-dành-riêng-reserved-ip-addresses"></a>Không gian địa chỉ mạng dành riêng (Reserved IP addresses)<a class="hash-link" href="#không-gian-địa-chỉ-mạng-dành-riêng-reserved-ip-addresses" title="Direct link to heading">#</a></h2><p>Là các dải mạng đặc biệt và không được định tuyến trên Internet, danh sách theo trang chủ của IANA ở đây.</p><p><a href="https://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml" target="_blank" rel="noopener noreferrer">https://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="100640010"></a>100.64.0.0/10<a class="hash-link" href="#100640010" title="Direct link to heading">#</a></h3><p>Trong năm 2012, IANA đã phân bổ 4 triệu địa chỉ 100.64.0.0/10 để sử dụng trong môi trường NAT giữa các thiết bị định tuyến của nhà mạng với vai trò nhà cung cấp dịch vụ.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="carrier-grade-nat-cgnat"></a>Carrier-grade NAT (CGNAT)<a class="hash-link" href="#carrier-grade-nat-cgnat" title="Direct link to heading">#</a></h4><p>Công nghệ NAT được sử dụng trong ISP</p><p><a href="https://datatracker.ietf.org/doc/html/rfc6598" target="_blank" rel="noopener noreferrer">https://datatracker.ietf.org/doc/html/rfc6598</a></p><p>Là dải địa chỉ mạng private giống như RFC1918 nhưng được dành riêng cho việc NAT giữa các nhà cung cấp Internet. Trên Internet, việc NAT không giống như ở dưới hạ tầng local, ISP không sử dụng các dải mạng Private RFC1918. họ dùng dải mạng dành riêng chỉ cho việc NAT giữa các thiết bị NAT, các thiết bị này phải hỗ trợ CGN. Dải mạng này không được quảng bá hoặc route ra ngoài Internet và cũng không dùng được trong Internal, nó chỉ dùng cho việc NAT giữa các Router trong và ngoài mạng</p><p>Dải địa chỉ này sẽ được ngầm sử dụng trong việc giao tiếp giữa Gateway TIER-0 và TIER-1 trong NSX-T</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="2240004"></a>224.0.0.0/4<a class="hash-link" href="#2240004" title="Direct link to heading">#</a></h3><p>Đây là dải mạng Multicast, sử dụng nhiều trong giao thức VRRP, cấu hình định tuyến OSPF hoặc IGMP</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1692540016"></a>169.254.0.0/16<a class="hash-link" href="#1692540016" title="Direct link to heading">#</a></h3><p>Dải mạng link-local phiên bản cho IPv4. Phía dưới nền network, địa chỉ này có thể được sử dụng để cung cấp các dịch vụ như Time, DNS Server. Ví dụ như AWS EC2 sử dụng các địa chỉ sau</p><ul><li><code>NTP</code>: <em>169.254.169.123</em></li><li><code>DNS</code>: <em>169.254.169.253</em></li></ul><p>Trong NSX-T chúng được sử dụng làm Transit Link giữa traffic DR/SR trong cùng một Gateway</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="routing-architecture"></a>Routing Architecture<a class="hash-link" href="#routing-architecture" title="Direct link to heading">#</a></h2><p>Trong NSX-T có 2 loại Gateway là Tier-0 (north-south traffic) và Tier-1 (east-west traffic).</p><p>Dựa vào khái niệm cơ bản của DataCenter, ta có 2 loại traffic là</p><ul><li><code>North-South traffic</code>: Traffic đi ra ngoài cluster trên DataCenter</li><li><code>East-West traffic</code>: Traffic nội bộ bên trong giữa các Node với nhau</li></ul><p>Để Routing trong và ngoài hệ thống mạng, ta sẽ có 2 mô hình là Single-Tier và Multi-Tier khi cấu hình NSX-T.</p><p><img alt="image" src="/system.conf/assets/images/nsxt-routing-architecture-a1c3d8ab8bd92cddc846d44d760ddac5.png"></p><p>Trong NSX-T có 2 loại gateway tương ứng là Tier-0 Gateway và Tier-1 Gateway, với 2 loại gateway này ta sẽ có mô hình routing giữa Cluster với hệ thống bên ngoài. Các gateway hoạt động giữa vào các Edge Node, về cơ bản nó giống như một thiết bị Layer 3 như Switch Layer 3 có khả năng Routing, nhưng vì Gateway trong NSX-T là SDN nên nó hỗ trợ định tuyến được rất nhiều giao thức.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="single-tier-routing"></a>Single Tier Routing<a class="hash-link" href="#single-tier-routing" title="Direct link to heading">#</a></h3><ul><li><p>Chỉ sử dụng Tier-0 gateway, gateway này sẽ kết nối tất cả các VM trong Cluster, Tier-0 có khả năng kết nối với Uplink đi ra ngoài Cluster. Mô hình này rất đơn giản, một gateway dùng cho tất cả các VM.</p><p><img alt="image" src="/system.conf/assets/images/nsxt-single-tier-c95d65fe2b13894a3d00965743bfa767.png"></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="multi-tier-routing"></a>Multi Tier Routing<a class="hash-link" href="#multi-tier-routing" title="Direct link to heading">#</a></h3><ul><li><p>Việc chỉ sử dụng Tier-0 thì tất cả các VM đều có khả năng đi được lưu lượng ra ngoài Cluster, nhưng nếu ta chỉ có các VM mà chỉ giao tiếp nội bộ bên trong Cluster mà không muốn cho ra ngoài thì sao ? Tier-0 vẫn làm được bằng cách không NAT dải đó ra ngoài qua Uplink là được, tuy nhiên với concepts chuẩn của việc sinh ra Tier-0 và Tier-1, muốn độc lập hoàn toàn về mặt secure, ta sẽ có 1 loại gateway gọi là Tier-1. Loại gateway này không được cấu hình Uplink ra ngoài và traffic sẽ chỉ nội bộ trong Cluster, chúng có thể có khác vùng mạng nhưng vẫn Routing được chỉ bên trong với nhau. Tier-1 tuy là gateway nội bộ nhưng vẫn có trường hợp cần cho các VM nối vào Tier-1 được đi ra ngoài Cluster. Và ta sẽ cấu hình thêm Tier-1 nối tới Tier-0 qua CGNAT. Đây là một kỹ thuật NAT giữa các Router trong ISP (nhà cung cấp dịch vụ mạng), được ứng dụng trong NSX-T.</p></li><li><p>Các VM kết nối tới Gateway khác nhau hoặc không cùng Gateway này thì không thể nào giao tiếp được với nhau, phù hợp với hệ thống kiểu Multi-Tenant hoặc muốn phân chia Network mức độ cao giữa các VM.</p><p><img alt="image" src="/system.conf/assets/images/nsxt-multi-tier-d3afb5396b17c4556abf629f2fc9f832.png"></p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="transport-zones"></a>Transport Zones<a class="hash-link" href="#transport-zones" title="Direct link to heading">#</a></h2><p>Một transport zone được tạo ra sẽ thiết lập một vòng biên mạng. Chỉ có các Node, các Edge nằm trong cùng một zone mới có thể thấy được Logical Switch (segments) của nhau.</p><p><img alt="image" src="/system.conf/assets/images/nsxt-transport-zone-3e81009ea0094b137a24c6920a795532.png"></p><p>Transport Zone được tạo ra nhằm mục đích để VM nhìn thấy nhau trong Transport Zone đó. Ví dụ ta có 3 Cluster</p><ul><li>Cluster A<ul><li>Node A-0 (zone VNPT)</li><li>Node A-1 (zone VNPT)</li></ul></li><li>Cluster B<ul><li>Node B-0  (zone VNPT)</li></ul></li><li>Cluster C<ul><li>Node C-0 (zone Viettel)</li><li>Node C-1 (zone VNPT)</li></ul></li><li>Cluster D<ul><li>Node D-0 (zone Viettel)</li><li>Node D-1</li><li>Node D-2</li></ul></li></ul><p>Chỉ các VM trong node <code>A-0</code>, <code>A-1</code>, <code>B-0</code>, <code>C-1</code> thuộc <code>zone VNPT</code> mới có thể nhìn thấy PortGroup (segments) trong zone VNPT.</p><p>Chỉ các VM trong node <code>C-0</code>, <code>D-0</code> mới có thể nhìn thấy PortGroup (segments) trong zone Viettel.</p><p>Các VM ở các node thuộc zone nào sẽ chỉ nhìn thấy PortGroup của zone đó và không nhìn thấy hoặc không thể gán sang PortGroup thuộc zone khác. Như ví dụ trên, mặc dù <code>Cluster C</code> có 2 node trong cùng một Cluster, nhưng thuộc Zone khác nhau nên cả 2 Node đó sẽ không thấy PortGroup thuộc Zone của nhau. Mặc dù chúng có cùng VDS luôn nhưng khác Zone nên sẽ không nhìn thấy nhau được.</p><p>Có 2 loại Transport Zone. Overlay và VLAN</p><ul><li><code>Overlay</code>: sẽ dùng cho kết nối nội bộ bên trong giữa các node, NSX-T sẽ sử dụng giao thức GENEVE.</li><li><code>VLAN</code>: Sử dụng cho Underlay để kết nối thẳng với kết nối VLAN ngoài Host. Loại này thường sử dụng dùng kết nối North-South từ Uplink của NSX-T Edge tới hạ tầng vật lý.</li></ul><p>Thuộc tính của Transport Zone</p><ol><li>Một Transport Zone có thể sử dụng cho tất cả các loại Transport Node (ESXi, KVM, Bare-metal server, NSX-Edge)</li><li>Có 2 loại Transport Zone là (VLAN hoặc Overlay)</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="uplink-profile"></a>Uplink profile<a class="hash-link" href="#uplink-profile" title="Direct link to heading">#</a></h2><p>Các Nodes muốn giao tiếp với các Node khác sẽ phải cấu hình Uplink. Uplink này thường là các Port vật lý trên các Node. Cấu hình Uplink sẽ chọn các Port, cấu hình LAGs, Teaming giống trên VDS.</p><p>Uplink trong NSX-T có 1 tham số gọi là Transport VLAN. Network mà sử dụng Transport Zone thuộc kiểu Overlay thì nó sẽ phải đi qua một VLAN gọi là Transport VLAN</p><p>Transport Zones thuộc loại Overlay và Uplink có tham số Transport VLAN sẽ kết hợp với nhau để tạo ra 1 đường Overlay. Lưu lượng của toàn bộ các VM bên trong một Zones thuộc loại Overlay sẽ đi qua VLAN này, VLAN cấu hình trên Uplink sẽ chọn Port và Teaming policy, giống với Uplink trong VDS</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="overlay-là-gì"></a>Overlay là gì<a class="hash-link" href="#overlay-là-gì" title="Direct link to heading">#</a></h2><p>Overlay network là 1 concepts nhằm mục đích đóng gói và vận chuyển gói tin từ Host này sang Host khác. Overlay Network mang thông tin của Network từ Node này đi sang Node khác. Ví dụ</p><ul><li>Node: A<ul><li>VM: A-0 (VNI 71010)</li><li>VM: A-1 (VNI 71020)</li></ul></li><li>Node: B<ul><li>VM: B-0 (VNI 72010)</li><li>VM: B-1 (VNI 72020)</li></ul></li><li>Node: C<ul><li>VM: C-0 (VNI 73010)</li><li>VM: C-1 (VNI 73020)</li><li>VM: C-2 (VNI 73030)</li></ul></li></ul><p>Mỗi node sẽ chỉ có 1 port vật lý, khi một VM từ node này đi sang node khác, gói tin sẽ được đóng trong Overlay và gửi giữa các Node, về lý thuyết thì chúng là thông suốt với nhau, ví dụ các VM có VNI (ID của VXLAN) là 71000 có cùng dải với nhau sẽ nhìn thấy nhau 1 cách trong suốt, nhưng thực chất chúng đi trên một đường vật lý gọi là Overlay và được vận chuyển xuống dưới VM tương ứng</p><p><img alt="image" src="/system.conf/assets/images/overlay-6d8a734e03ccbe86b173a7f08931c3d8.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="giao-thức-geneve"></a>Giao thức GENEVE<a class="hash-link" href="#giao-thức-geneve" title="Direct link to heading">#</a></h3><p>Giao thức cung cấp tầng network Overlay. Đầu tiên hệ thống sẽ tạo ra các mạng Logical để cô lập tài nguyên Network, sử dụng giao thức Geneve, lớp này sẽ là trừu tượng giữa các Node, gói tin được đóng gói qua NIC. Geneve hoạt động bằng cách tạo Layer 2 Logical Network sau đó đóng gói qua UDP Layer 3 để gửi đi giữa các Hosts. Theo tài liệu của RFC, mục đích thiết kế ra GENEVE vì các vendor về network phát triển nhiều giao thức Overlay khác nhau, trong đó có VXLAN và NVGRE, chúng sử dụng format gần giống nhau với concepts chính là dùng 24 bit làm NI (network identifier)</p><p><img alt="image" src="/system.conf/assets/images/geneve-b6ce979e5373edb19b1655edf91f598a.png"></p><p>GENEVE sẽ thực hiện implement các giao thức này, về mặt thiết kế, nó tạo ra một giao thức mới là GENEVE giống với các giao thức trên. Nhưng trong Header sẽ chứa OPTIONAL, Nếu 2 thiết bị có hỗ trợ Offload gói tin trên thiết bị phần cứng (Hardward Offload) VXLAN hoặc NVGRE hoặc giao thức như bảng trên thì GENEVE có thể truyền packet theo đúng giao thức của Offload đó, ví dụ VXLAN, còn nếu thiết bị không hỗ trợ thì nó vẫn có thể truyền data và tự Offload không thông qua phần cứng</p><p>Gói tin của VXLAN bên dưới</p><p><img alt="image" src="/system.conf/assets/images/geneve-vxlan-header-3abc082e834c201db223ae7e4c6adddb.png"></p><p>Vậy điều đó có nghĩa là các thiết bị có hỗ trợ Hardware Offload của các giao thức trên sẽ có performance tốt hơn. Những thiết bị không có Hardware Offload thì vẫn có thể dùng GENEVE để giao tiếp và gần như là một giao thức phiên dịch đứng ở giữa cho các giao thức trên</p><ul><li><code>PowerEdge R750</code><ul><li><code>Interface</code>: <strong>Broadcom NetXtreme E-Series Quad-port 25Gb OCP 3.0 Ethernet Adapter</strong></li></ul></li></ul><p>Đây là một trong server mới với card hỗ trợ Hardward Offload VXLAN / NVGRE và GENEVE</p><p><a href="https://docs.broadcom.com/doc/12395116" target="_blank" rel="noopener noreferrer">https://docs.broadcom.com/doc/12395116</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="n-vds"></a>N-VDS<a class="hash-link" href="#n-vds" title="Direct link to heading">#</a></h2><p>Trong NSX-T thì khi các Node join vào cụm thì sẽ được cài đặt một loại switch ảo gọi là N-VDS, giống với việc khi join vào vCenter thì vCenter sẽ đẩy VDS xuống các Host. N-VDS trong NSX-T là một loại switch tương tự như VDS nhưng được thiết kế với các chức năng tương đương trong NSX-T, GENEVE Overlay là một ví dụ.</p><p>Tuy nhiên từ các bản trước 3.0. N-VDS được cài riêng biệt với VDS, nghĩa là N-VDS được quản lý bởi NSX-T Manager và VDS vẫn thuộc quản lý của vCenter. Từ 3.0 trở đi thì VMware đã thiết kế để tận dụng VDS bằng cách thêm một tùy chọn là cài N-VDS trên VDS, tức là N-VDS vẫn được cài riêng nhưng sẽ build-on-top của VDS. Tận dụng được VDS, về bản chất chúng vẫn riêng biệt với nhau, nhưng cấu hình lại giúp cho chúng liên quan với nhau. Thiết kế này giúp đơn giản hóa việc cấu hình NSX-T trên VMware vSphere hơn rất nhiều.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>N-VDS là một V-Switch Software của NSX-T Manager xuống các Node</p></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>N-VDS built-on-top VDS chỉ hoạt động nếu NSX-T là 3.0 và vSphere VDS là 7.0 trở lên</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="segments-logical-switch"></a>Segments (logical switch)<a class="hash-link" href="#segments-logical-switch" title="Direct link to heading">#</a></h2><p>Một Segments được tạo tương đương với việc tạo PortGroup trên vCenter, nhưng Segments ở NSX-T không chỉ tạo ra Port, chúng tạo ra Logical Switch.</p><p><img alt="image" src="/system.conf/assets/images/nsxt-segment-ls-with-vds-2d070906c4a7c156076d00eaa8c6c4ac.png"></p><p>Với việc sử dụng VDS trên vCenter, các PortGroup cùng VLAN sẽ đều thông suốt với nhau, gói tin thuần túy luôn là Layer 2 và được truyền thẳng tới VM -&gt; VDS -&gt; VM như sau.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|      VM 1     |                  VDSwitch                  |      VM 2     |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| (Port in VDS) | =&gt; | (Port Group) | =&gt; | (Port Group) | =&gt; | (Port in VDS) |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|    (Host A)   |    |   (Host A)   |    |   (Host B)   |    |    (Host B)   |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------------------------------------------------------</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Trên NSX thì N-VDS sẽ tạo ra logical switch, trước đây NSX-V gọi tên là Logical Switch, nhưng NSX-T gọi nó là Segments, có lẽ việc này để tránh bị hiểu nhầm là sao đã có N-VDS là Switch rồi thì tại sao lại có thêm một lớp Switch nữa ? Thực ra đây không phải là Switch ảo nằm trong N-VDS, nó là một cấu hình được phân tách gọi là Domain giống như các thiết bị mạng khác. Từ bây giờ ta sẽ gọi nó là Segments, tuy nằm trong cùng một Switch là V-VDS và thậm chí có thể cùng Transport Zone, nhưng giữa các Segments là độc lập với nhau. Mỗi một Segments được tạo ra sẽ được tự động gán một VNI (Network ID) khác nhau, do đó có thể tách được luồng traffic riêng biệt giữa các VM giống như VLAN PortGroup trên VDS, tuy nhiên trong Segments của NSX-T, ta còn có thể cấu hình các chức năng của Layer 3 trên Segments này. Tóm lại thì N-VDS thực chất là V-Switch Layer 3 và Segments là một Domain mang cấu hình riêng biệt được Apply các chức năng của cả Layer 2 và Layer  3 từ N-VDS.</p><p><img alt="image" src="/system.conf/assets/images/nsxt-segment-demo-80fa70739177daafc09c6c2c31b5c496.png"></p><p>Segments mang theo nhiều tính năng của Layer 3 nên cũng bảo mật hơn, gói tin vừa giao tiếp được ở Layer 2 nhờ vào việc mỗi Segments có một VNI riêng biệt, trong trường hợp VM có cùng Segments thì chúng vẫn có thể được Apply các Rule ở Layer 3.</p><p>Ví dụ cho use-case của thiết kế này đó là khi 2 VM cùng Segments, chúng có thể giao tiếp với nhau khi nằm cùng một Segment, nhưng nếu muốn đặt một Firewall rule ở giữa các VM cùng một Segments (NSX-T PortGroup), thậm chí các VM này cùng nằm trên một ESXI node, rule vẫn sẽ được áp dụng cho 2 VM này, rule này có thể là Rule ở Layer 2, Rule ở Layer 3 theo IP, Rule ở Layer 7 theo giao thức ứng dụng. Các rule này thường là Stateful nên khá dễ dàng thiết lập và cài đặt.</p><p><img alt="image" src="/system.conf/assets/images/nsxt-dfw-a8617c7f18d1d63562fb25ad00bb0709.png"></p><ul><li>Bài viết gốc: <a href="https://blogs.vmware.com/networkvirtualization/2016/06/micro-segmentation-defined-nsx-securing-anywhere.html/" target="_blank" rel="noopener noreferrer">https://blogs.vmware.com/networkvirtualization/2016/06/micro-segmentation-defined-nsx-securing-anywhere.html/</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="transport-nodes"></a>Transport Nodes<a class="hash-link" href="#transport-nodes" title="Direct link to heading">#</a></h2><p>Khi tất cả những Policy ở trên đã khởi tạo và định nghĩa ra. Các Node sẽ phải được apply vào. NSX-T hỗ trợ ESXI Node và thậm chí là cả các hệ thống ảo hóa khác như KVM hoặc một node chạy Linux OS như CentOS, Ubuntu. Tuy nhiên ta sẽ chỉ nói về hai Transport Node của VMware chính đó là</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="vsphere-esxi-node"></a>vSphere ESXi Node<a class="hash-link" href="#vsphere-esxi-node" title="Direct link to heading">#</a></h3><p>Ở phần N-VDS thì ESXi Node có thể cấu hình VDS và N-VDS built-on-top VDS. Một ESXi Node có N-VDS có nghĩa là nó đã trở thành một Transport Node và có thể nhận các chức năng, cấu hình của NSX-T. ESXi Node là Transport Node thì sẽ gọi là <code>Host Transport Node</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="nsx-t-edge-node"></a>NSX-T Edge Node<a class="hash-link" href="#nsx-t-edge-node" title="Direct link to heading">#</a></h3><p>Trong đó Edge Node đóng vai trò gần giống như một Router Layer 3-7 cấp cao, Edge Node cũng đóng vai trò làm Gateway cho traffic giữa các Cluster hoặc traffic đi ra ngoài. Edge Node có thể deploy dưới dạng máy ảo với 4 sizing như sau</p><p><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/installation/GUID-22F87CA8-01A9-4F2E-B7DB-9350CA60EA4E.html" target="_blank" rel="noopener noreferrer">https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/installation/GUID-22F87CA8-01A9-4F2E-B7DB-9350CA60EA4E.html</a></p><p>Với mỗi sizing càng cao thì khả năng chịu tải tốt hơn cũng như có thể sử dụng nhiều tính năng của NSX-T hơn.</p><p>Edge Node có thể cấu hình VLAN Uplink đi ra ngoài Cluster và chỉ có Edge Node mới làm được điều này, nếu không có Edge Node thì các VM trong các Transport Node không thể nào đi ra ngoài hoặc đi sang Segments khác được. Edge Node chỉ thực hiện chức năng Network Workload, nó không chứa VM gì bên trong.</p><blockquote><p><em>Core của NSX-T sử dụng Docker và công nghệ Container</em></p></blockquote><p>NSX-T khi được deploy và được cài N-VDS cũng sẽ trở thành một Transport Node, gọi là <code>Edge Transport  Node</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="logical-router"></a>Logical Router<a class="hash-link" href="#logical-router" title="Direct link to heading">#</a></h2><p>Bao gồm Service Router (SR) và Distributed Routing (DR). Router này hoạt động nếu Node được gắn vào Tier-0/1 Gateway</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="service-router-sr-và-distributed-routing-dr"></a>Service Router (SR) và Distributed Routing (DR)<a class="hash-link" href="#service-router-sr-và-distributed-routing-dr" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="distributed-routing"></a>Distributed Routing<a class="hash-link" href="#distributed-routing" title="Direct link to heading">#</a></h3><p>DR sẽ được khởi tạo và chạy trên tất cả các Transport Node, đúng như tên gọi của nó, Routing giữa các VM khi đi qua Gateway mà trong cùng các Node trong Cluster, nó sẽ route đến tất cả các Node, trong trường hợp ta có 2 VM ở 2 Segments khác nhau, có thể hiểu như 2 vùng mạng khác nhau thì luồng của chúng đi như sau</p><ul><li><code>Host A</code>: VM 1 (Segment A)</li><li><code>Host B</code>: VM 2 (Segment B)</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">|--------------------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   VM 1   | =&gt; | Logical Switch | =&gt; | T0-1 Gateway              | =&gt; | Logical Switch | =&gt; |   VM 2   |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| (Host A) |    |    (Host A)    |    |   (Logical Router)        |    |    (Host B)    |    | (Host B) |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|          |    |                |    |     (Distributed Routing) |    |                |    |          |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|--------------------------------------------------------------------------------------------------------</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="service-router"></a>Service Router<a class="hash-link" href="#service-router" title="Direct link to heading">#</a></h3><p>Chịu trách nhiệm thực hiện các nhiệm vụ sau</p><ol><li>Connectivity to physical infrastructure</li><li>NAT</li><li>DHCP server</li><li>MetaData Proxy</li><li>Edge Firewall</li><li>Load Balancer</li></ol><p>SR hoạt động trong Edge Node khi Edge Node link tới Tier-0 gateway. Chủ yếu thực hiện các chức năng mạng dạng statefull như trên</p><p><img alt="image" src="/system.conf/assets/images/nsxt-sr-topo-6a6b7ebf7991584d5c6fea5dc68a40e0.png"></p><p>Hình trên mô tả về SR, sử dụng NAT ra ngoài Internet qua Edge Node. Edge Node ở hình trên được gắn Uplink nối ra ngoài WAN Internet, trong ví dụ này khi đi ra ngoài Internet ta sẽ phải NAT, mà mỗi lần NAT ra IP Public từ IP Private thì đi ra từ đường nào sẽ phải đi vào bằng đường đó. Vậy Service Router là một use-case như vây.</p><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="kết-hợp-giữa-sr-và-dr"></a>Kết hợp giữa SR và DR<a class="hash-link" href="#kết-hợp-giữa-sr-và-dr" title="Direct link to heading">#</a></h6><p>Ở mô tả về SR thì SR có thể dùng để kết nối ra ngoài, nhưng để kết nối được ra ngoài. Chúng vẫn phải đi qua DR.  Trong hình dưới ta thấy 2 VM Web-LS có IP là 172.16.10.11 và 172.16.10.12, để đi ra được mạng khác hay là ra ngoài thì chúng phải có Gateway IP, Gateway IP này nằm trên Logical Router có địa chỉ là 172.16.10.1. Địa chỉ này chính là DR, trong trường hợp kết nối giữa 2 Segments nội bộ thì DR thì định tuyến sang dải mạng ở Segments mà DR có thể định tuyến tới, trong hình thì ta thấy có App-LS có IP là 172.16.20.11 và gateway là 172.16.20.1. Nếu đi từ Web-LS (172.16.10.x) tới App-LS (172.16.20.x) thì chúng đi như sau</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">|----------------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| Web-LS | =&gt; | Logical Switch | =&gt; | T0-1 Gateway              | =&gt; | Logical Switch | =&gt; | App-LS |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|        |    |                |    |   (Logical Router)        |    |                |    |        |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|        |    |                |    |     (Distributed Routing) |    |                |    |        |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|----------------------------------------------------------------------------------------------------</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Tiếp đến là từ Web-LS đi ra bên ngoài. Chính là cái Physical Router kia, chúng sẽ đi theo flow trên nhưng phải đi qua SR từ DR. Từ DR tới SR, Logical Router sẽ phải Route qua một Transit link bằng việc sử dụng một dải IP Linklocal IPv4 là 169.254.0.0/28. Về bản chất thì SR và DR cùng nằm trong một Logical Router nên việc sử dụng Linklocal IPv4 để transit giữa 2 loại Routing này là hoàn toàn hợp lý</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">|-------------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| Web-LS | =&gt; | Logical Switch | =&gt; | T0-1 Gateway                               |    |          |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|        |    |                |    |   (Logical Router) =======&gt;&gt;&gt;&gt; Transit LS  |    | Physical |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|        |    |                |    |     (Distributed Routing) ==== 169.254.0.1 |    | Router   |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|        |    |                |    |     (Service Router)========== 169.254.0.2 | =&gt; | Uplink   |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|-------------------------------------------------------------------------------------------------</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img alt="image" src="/system.conf/assets/images/nsxt-dr-to-sr-efd3a0b240081e402db59274a32c19d2.png"></p><blockquote><p>Lưu ý, phần này chỉ mô tả về Logical Router ở bên trong khi gói tin chạy trong một Gateway, không phải là giữa T0 và T1 Gateway</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="edge-bridge"></a>Edge Bridge<a class="hash-link" href="#edge-bridge" title="Direct link to heading">#</a></h2><p>Sử dụng để bridge từ hệ thống mạng vật lý hoặc bên ngoài hạ tầng NSX-T trực tiếp qua Layer 2. Use case đó là bridge hạ tầng ngoài và hạ tầng bên trong khi chúng cùng dải mạng. Xem ví dụ bên hình dưới .</p><p><img alt="image" src="/system.conf/assets/images/nsxt-edge-bridge-acba9afbce0ff055cc977e8e423ca8a6.png"></p><p>Tính năng này sử dụng trong Use-case khi hệ thống mạng cùng sử dụng cả mô hình VLAN cũ truyền thống kết hợp với NSX. Ví dụ có 6 VM chạy ứng dụng ở hệ thống mạng X, tiếp đó ta chạy ảo hóa và đưa được 3 VM sang ảo hóa, sau đó cho 3 VM này đưa vào NSX-T để chạy Network của NSX. Tuy nhiên kết nối của nhóm 3 VM ở hạ tầng cũ và nhóm 3 VM ở NSX không thể thay đổi cấu hình bên trong máy ảo vì một lý do nào đó, nên kết nối của chúng vẫn là kết nối cũ, ví dụ từ App kết nối sang Database cùng dải mạng cũ, không thể thay đổi thay đổi cấu hình này, phải giữ nguyên. Vậy ta sẽ dùng Bridge từ Edge (vì Edge Node mới có Uplink ra ngoài được), sau đó bridge uplink đó sang hệ thống mạng VLAN cũ, vậy là Edge Node đóng vai trò là thiết bị Bridge, 3 VM bên trong NSX có thể là bất cứ Overlay Segment nào, nhưng đi qua Bridge của Edge Node, gói tin sẽ được truyền qua Layer 2 qua Edge Node và tới được hệ thống mạng VLAN cũ.</p><p>3 VM ở hệ thống mạng VLAN cũ sẽ chỉ giao tiếp được với VM ở nhóm được Bridge trong NSX, mặc dù cùng dải mạng và được Bridge với nhau qua Edge Node nhưng 3 VM ở ngoài kia không nằm trong Transport Node cũng như không nằm trong Transport Zone nên không thể giao tiếp được với các hệ thống khác trong NSX. Tuy nhiên 3 VM ở trong nếu có Route sang các Segments khác thì chúng vẫn giao tiếp được với nhau, chỉ 3 VM ở ngoài là giao tiếp riêng biệt với 3 bên trong NSX.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="cấu-hình-tổng-quan"></a>Cấu hình tổng quan<a class="hash-link" href="#cấu-hình-tổng-quan" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="flow-diagram"></a>Flow Diagram<a class="hash-link" href="#flow-diagram" title="Direct link to heading">#</a></h3><p><img alt="image" src="/system.conf/assets/images/nsxt-config-flow-7f095be758815ca4bcd0dee7e2d5dd28.png"></p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/system.conf/blog/tags/nsxt">nsxt</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/system.conf/blog/tags/nsx">nsx</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/system.conf/blog/tags/vmware">vmware</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/system.conf/blog/tags/sdn">sdn</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/system.conf/blog/tags/network">network</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/system.conf/blog/tags/virtualization">virtualization</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/scila1996/system.conf/posts/blog/sdn-nsx-t-intro/nsx-t.guid3.101.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#east-west-traffic-và-north-south-traffic" class="table-of-contents__link">East-West traffic và North-South traffic</a></li><li><a href="#kiến-trúc-mạng-leaf-spine" class="table-of-contents__link">Kiến trúc mạng Leaf-Spine</a></li><li><a href="#thiết-kế-hạ-tầng-network" class="table-of-contents__link">Thiết kế hạ tầng Network</a></li><li><a href="#không-gian-địa-chỉ-mạng-dành-riêng-reserved-ip-addresses" class="table-of-contents__link">Không gian địa chỉ mạng dành riêng (Reserved IP addresses)</a><ul><li><a href="#100640010" class="table-of-contents__link">100.64.0.0/10</a></li><li><a href="#2240004" class="table-of-contents__link">224.0.0.0/4</a></li><li><a href="#1692540016" class="table-of-contents__link">169.254.0.0/16</a></li></ul></li><li><a href="#routing-architecture" class="table-of-contents__link">Routing Architecture</a><ul><li><a href="#single-tier-routing" class="table-of-contents__link">Single Tier Routing</a></li><li><a href="#multi-tier-routing" class="table-of-contents__link">Multi Tier Routing</a></li></ul></li><li><a href="#transport-zones" class="table-of-contents__link">Transport Zones</a></li><li><a href="#uplink-profile" class="table-of-contents__link">Uplink profile</a></li><li><a href="#overlay-là-gì" class="table-of-contents__link">Overlay là gì</a><ul><li><a href="#giao-thức-geneve" class="table-of-contents__link">Giao thức GENEVE</a></li></ul></li><li><a href="#n-vds" class="table-of-contents__link">N-VDS</a></li><li><a href="#segments-logical-switch" class="table-of-contents__link">Segments (logical switch)</a></li><li><a href="#transport-nodes" class="table-of-contents__link">Transport Nodes</a><ul><li><a href="#vsphere-esxi-node" class="table-of-contents__link">vSphere ESXi Node</a></li><li><a href="#nsx-t-edge-node" class="table-of-contents__link">NSX-T Edge Node</a></li></ul></li><li><a href="#logical-router" class="table-of-contents__link">Logical Router</a></li><li><a href="#service-router-sr-và-distributed-routing-dr" class="table-of-contents__link">Service Router (SR) và Distributed Routing (DR)</a><ul><li><a href="#distributed-routing" class="table-of-contents__link">Distributed Routing</a></li><li><a href="#service-router" class="table-of-contents__link">Service Router</a></li></ul></li><li><a href="#edge-bridge" class="table-of-contents__link">Edge Bridge</a></li><li><a href="#cấu-hình-tổng-quan" class="table-of-contents__link">Cấu hình tổng quan</a><ul><li><a href="#flow-diagram" class="table-of-contents__link">Flow Diagram</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">This page is powered by Docusaurus</div></div></div></footer></div>
<script src="/system.conf/assets/js/runtime~main.d3cada47.js"></script>
<script src="/system.conf/assets/js/main.387993f1.js"></script>
</body>
</html>